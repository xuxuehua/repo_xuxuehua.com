<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>vim - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Linux">Linux</a>&nbsp;&#187;&nbsp;vim
    <span class="updated">Page Updated&nbsp;
      2018-12-24 00:07
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">vim</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#vim">VIM</a><ul>
<li><a href="#_1">历史</a></li>
<li><a href="#_2">正常模式</a><ul>
<li><a href="#_3">方向</a></li>
<li><a href="#_4">翻页</a></li>
<li><a href="#_5">文件中操作</a></li>
<li><a href="#_6">移动到指定字符</a></li>
<li><a href="#_7">行首/行尾</a></li>
<li><a href="#_8">按单词移动</a></li>
<li><a href="#hml">H/M/L</a></li>
<li><a href="#_9">相对于光标滚屏</a></li>
<li><a href="#_10">查找</a></li>
<li><a href="#_11">利用跳转表</a></li>
<li><a href="#_12">使用标记</a></li>
<li><a href="#_13">折行</a></li>
<li><a href="#zz">ZZ</a></li>
</ul>
</li>
<li><a href="#_14">插入模式</a></li>
<li><a href="#_15">底行/命令模式</a><ul>
<li><a href="#help">help 帮助</a></li>
<li><a href="#colo">colo 颜色</a></li>
<li><a href="#_16">读文件</a></li>
<li><a href="#_17">缓冲区跳转</a></li>
<li><a href="#_18">展示窗口</a></li>
<li><a href="#_19">搜索</a></li>
<li><a href="#_20">区域选择</a></li>
<li><a href="#_21">宏录制</a></li>
<li><a href="#_22">统计文本行数和当前光标的位置</a></li>
<li><a href="#_23">统计字节数</a></li>
<li><a href="#_24">文本行翻转</a></li>
<li><a href="#1100">插入一个1到100的序列</a></li>
<li><a href="#_25">每一行文字前面增加序号</a></li>
<li><a href="#java-apache-eclipse">所有后缀为 java 的文件中的 apache 替换成 eclipse</a></li>
</ul>
</li>
<li><a href="#vimrc">vimrc</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="vim">VIM</h1>
<h2 id="_1">历史</h2>
<p>Vim 源于 Vi，但不是 Vi，Vi 作为计算机的文本编辑器历史极为悠远，它是由美国计算机科学家比尔·乔伊编写并于1976年发布的</p>
<p>Vim 诞生的要晚一些，它的第一个版本由布莱姆·米勒在1991年发布</p>
<p>随着 Vim 的不断发展，更多更好的功能被加了进来，正式名称改成了 Vi IMproved（增强），也就形成了现代的 Vim</p>
<h2 id="_2">正常模式</h2>
<h3 id="_3">方向</h3>
<div class="hlcode"><pre><span class="n">h</span> <span class="err">或</span> <span class="err">向左方向鍵</span><span class="p">(</span><span class="err">←</span><span class="p">)</span>      <span class="err">游標向左移動一個字元</span>
<span class="n">j</span> <span class="err">或</span> <span class="err">向下方向鍵</span><span class="p">(</span><span class="err">↓</span><span class="p">)</span>      <span class="err">游標向下移動一個字元</span>
<span class="n">k</span> <span class="err">或</span> <span class="err">向上方向鍵</span><span class="p">(</span><span class="err">↑</span><span class="p">)</span>      <span class="err">游標向上移動一個字元</span>
<span class="n">l</span> <span class="err">或</span> <span class="err">向右方向鍵</span><span class="p">(</span><span class="err">→</span><span class="p">)</span>      <span class="err">游標向右移動一個字元</span>
</pre></div>


<h3 id="_4">翻页</h3>
<p>使用<strong>CTRL-B</strong>和<strong>CTRL-F</strong>来进行翻页，它们的功能等同于PageUp和PageDown。</p>
<p><strong>CTRL-B</strong>和<strong>CTRL-F</strong>前也可以加上数字，来表示向上或向下翻多少页。</p>
<p>ctrl+u 向上移动半页</p>
<p>ctrl+d 向下移动半页</p>
<h3 id="_5">文件中操作</h3>
<p>命令"<strong>gg</strong>"移动到文件的第一行</p>
<p>而命令"<strong>G</strong>"则移动到文件的最后一行。</p>
<p>命令"<strong>G</strong>"前可以加上数字，在这里，数字的含义并不是倍数，而是你打算跳转的行号。例如，你想跳转到文件的第1234行，只需输入"<strong>1234G</strong>"。</p>
<p>你还可以按百分比来跳转，例如，你想跳到文件的正中间，输入"<strong>50%</strong>"；如果想跳到75%处，输入"<strong>75%</strong>"。注意，你必须先输入一个数字，然后输入"<strong>%</strong>"。如果直接输入"<strong>%</strong>"，那含义就完全不同了。"<strong>:help N%</strong>"阅读更多细节。</p>
<p>在文件中移动，你可能会迷失自己的位置，这时使用"<strong>CTRL-G</strong>"命令，查看一下自己位置。这个命令会显示出光标的位置及其它信息。为了避免迷失，你可以打开行号显示；使用"<strong>:set number</strong>"命令后，会在每一行前显示出行号，可以更方便的定位的跳转（<strong>:help 'number'</strong>）。</p>
<p>c   删除并进入插入模式</p>
<h3 id="_6">移动到指定字符</h3>
<p>上面的命令都是行间移动(除h, l外)，也就是从当前行移动到另外一行。如果我们想在当前行内快速移动，可以使用f, t, F, T命令。</p>
<p>"<strong>f</strong>"命令移动到光标右边的指定字符上，例如，"<strong>fx</strong>"，会把移动到光标右边的第一个'x'字符上。"<strong>F</strong>"命令则反方向查找，也就是移动到光标左边的指定字符上。</p>
<p>"<strong>t</strong>"命令和"<strong>f</strong>"命令的区别在于，它移动到光标右边的指定字符之前。例如，"<strong>tx</strong>"会移动到光标右边第一个'x'字符的前面。"<strong>T</strong>"命令是"<strong>t</strong>"命令的反向版本，它移动到光标左边的指定字符之后。</p>
<p>这四个命令只在当前行中移动光标，光标不会跨越回车换行符。</p>
<p>可以在命令前面使用数字，表示倍数。例如，"<strong>3fx</strong>"表示移动到光标右边的第3个'x'字符上。</p>
<p>"<strong>;</strong>"命令重复前一次输入的f, t, F, T命令，而"<strong>,</strong>"命令会反方向重复前一次输入的f, t, F, T命令。这两个命令前也可以使用数字来表示倍数。</p>
<h3 id="_7">行首/行尾</h3>
<p>在vim中，移动到行首的命令非常简单，就是"<strong>0</strong>"，这个是数字0，而不是大写字母O。移动到行尾的命令是"<strong>$</strong>"。</p>
<p>另外还有一个命令"<strong>^</strong>"，用它可以移动到行首的第一个非空白字符。</p>
<p>在正则表达式中我们会看到，"<strong>^</strong>"字符代表行首，而"<strong>$</strong>"字符代表行尾。可见，vi/vim的按键的安排，的确是别具匠心的。</p>
<h3 id="_8">按单词移动</h3>
<p>我们知道，英文文档的主体是单词，通常用空白字符(包括空格、制表符和回车换行符)来分隔单词。vim中提供了许多命令来按单词移动。</p>
<p>要根据单词来移动，首先要把文本分隔为一个个独立的单词。vim在对单词进行分隔时，会把'<em>iskeyword</em>'选项中的字符做为单词的组成字符。也就是说，一个单词(word)由'<em>iskeyword</em>'选项中定义的字符构成，它前面、后面的字符不在'<em>iskeyword</em>'选项定义的字符中。例如，如果我们把'<em>iskeyword</em>'选项设置为"<em>a-z,A-Z,48-57,_</em>"，那么"<em>FooBar_123</em>"被做为一个单词，而"<em>FooBar-123</em>"被做为三个单词："<em>FooBar</em>", "<em>-</em>"和"<em>123</em>"。"<em>a-z,A-Z,48-57,_</em>"中的48-57表示ASCII码表中的数字0-9。</p>
<p>vim中，移动光标到下一个单词的词首，使用命令"<strong>w</strong>"，移动光标到上一个单词的词首，使用命令"<strong>b</strong>"；移动光标到下一个单词的结尾，用命令"<strong>e</strong>"，移动光标到上一个单词的结尾，使用命令"<strong>ge</strong>"。</p>
<p>上面这些命令都使用'<em>iskeyword</em>'选项中的字符来确定单词的分界，还有几个命令，只把空白字符当做"<em>单词</em>"的分界。当然，这里说的"<em>单词</em>"已经不是传统意义上的单词了，而是由非空白字符构成一串字串。命令"<strong>W</strong>"移动光标到下个字串的开始，命令"<strong>B</strong>"移动到上个字串的开始；命令"<strong>E</strong>"移动到下个字串的结尾，命令"<strong>gE</strong>"移动到上个字串的结尾。和上面的命令比较一下，发现什么规律没有？</p>
<h3 id="hml">H/M/L</h3>
<p><strong>注意：</strong>这几个命令是大写的。</p>
<p>使用H/M/L这三个键，可以让光标跳到当前窗口的顶部、中间、和底部，停留在第一个非空字符上。H命令和L命令前也可以加一个数字，但数字的含义不再是倍数，而是指距窗口顶部、底部的行数。例如，"<strong>3H</strong>"表示光标移动到距窗口顶部第3行的位置；"<strong>5L</strong>"表示光标移动到距窗口底部5行的位置。</p>
<h3 id="_9">相对于光标滚屏</h3>
<p>在阅读代码时，有时我们需要根据光标所在的位置滚屏，把光标所在行移动窗口的顶端、中间或底部，这时就可以用到"<strong>zt</strong>"、"<strong>zz</strong>"和"<strong>zb</strong>"。这种滚屏方式相对于翻页来讲，它的好处在于，你能够始终以当前光标位置做为参照，不会出现翻几次页后，发现自己迷失了方向。</p>
<h3 id="_10">查找</h3>
<p>查找，也可以做为一种快速移动的方式。</p>
<p>在vim中查找非常容易，直接在Normal模式下输入"<strong>/</strong>"，然后输入你想查询的字符串，回车，就跳转到第一个匹配的地方了。"<strong>/</strong>"是向下查找，而"<strong>?</strong>"进行反方向查找。命令"<strong>n</strong>"重复上一次的查找命令，而命令"<strong>N</strong>"也重复上一次的查找命令，只不过它按相反方向查找。</p>
<p>vim保存了查找的历史记录，你可以在输入"<strong>/</strong>"或"<strong>?</strong>"后，用上、下光标键(或CTRL-P/CTRL-N)翻看历史记录，然后再次执行这个查找。</p>
<p>另外你还可以使用"<strong>q/</strong>"和"<strong>q?</strong>"命令，在vim窗口最下面打开一个新的窗口，这个窗口会列出你的查找历史记录，你可以使用任何vim编辑命令对此窗口的内容进行编辑，然后再按回车，就会对光标所在的行的内容进行查找。</p>
<p>使用"<strong>q/</strong>"命令打开了command-line窗口，这个窗口列出了我之前所查找的字符串。我现在想查找包含"<em>check_swap</em>"，于是先跳到第399行，把"<em>check_tty</em>"改为"<em>check_swap</em>"，然后按回车。此时vim就去查找包含"<em>check_swap</em>"位置了。这个例子比较简单，你可能觉得command-line窗口没什么必要，但如果你要查找的内容是一个很长的正则表达式，你就会发现它非常有用了。</p>
<p>vim中有许多与查找相关的选项设置，其中最常用的是'<em>incsearch</em>', '<em>hlsearch</em>', '<em>ignorecase</em>'。</p>
<ul>
<li>'<em>incsearch</em>'表示在你输入查找内容的同时，vim就开始对你输入的内容进行匹配，并显示匹配的位置。打开这个选项，你可以即时看到查找的结果。</li>
<li>'<em>hlsearch</em>'选项表示对匹配的所有项目进行高亮显示。</li>
<li>'<em>ignorecase</em>'选项表示在查找时忽略大小写。</li>
</ul>
<p>通常我会打开'<em>incsearch</em>'和'<em>hlsearch</em>'选项，关闭'<em>ignorecase</em>'选项。</p>
<h3 id="_11">利用跳转表</h3>
<p>在vim中，很多命令可以引起跳转，vim会记住把跳转前光标的位置记录到跳转表中，并提供了一些命令来根据跳转表进行跳转。要知道哪些命令引起跳转，参见"<strong>:help jump-motions</strong>"。</p>
<p>使用命令"<strong>''</strong>"（两个单引号）和"<strong><code>**"(两个反引号，在键盘上和"~"共用一个键)可以返回到最后跳转的位置。例如，当前光标位于文件中第1234行，然后我使用"**4321G**"命令跳转到第4321行；这时如果我按"**''**"或"**</code></strong>"，就会跳回到1234行。</p>
<p>因为这两个命令也属于跳转命令，所以第4321行也被记入跳转表，如果你再次使用这两个命令，就会发现自己又跳回第4321行了。</p>
<p>这两个命令有一点不同，"<strong>``</strong>"在跳转时会精确到列，而"<strong>''</strong>"不会回到跳转时光标所在的那一列，而是把光标放在第一个非空白字符上。</p>
<p>如果想回到更老的跳转位置，使用命令"<strong>CTRL-O</strong>"；与它相对应的，是"<strong>CTRL-I</strong>"，它跳转到更新的跳转位置(<strong>:help CTRL-O</strong>和<strong>:help CTRL-I</strong>)。这两个命令前面可以加数字来表示倍数。</p>
<p>使用命令"<strong>:jumps</strong>"可以查看跳转表(<strong>:help :jumps</strong>)。</p>
<h3 id="_12">使用标记</h3>
<p>标记(mark)是vim提供的精确定位技术，其功能相当于GPS技术，只要你知道标记的名字，就可以使用命令直接跳转到该标记所在的位置。</p>
<p>vim中的标记都有一个名字，这个名字用单一的字符表示。大写和小写字母(A-Za-z)都可以做为标记的名字，这些标志的位置可以由用户来设置；而数字标记0-9，以及一些标点符号标记，用户不能进行设置，由vim来自动设置。</p>
<p>我们主要讲述字母标记的使用，对于数字标记和标点符号标记，请自行参阅帮助手册(<strong>:help mark-motions</strong>)。</p>
<p>小写字母标记局限于缓冲区，也就是说，每个缓冲区都可以定义自己的小写字母标记，各缓冲区间的小写字母标记彼此不干扰。如果我在文件A中设置一个标记t，然后在文件B中也可以设置一个标记t。那么在文件A中，可以用"<strong>'t</strong>"命令跳到文件A的标记t位置 ；在文件B中，可以用"<strong>'t</strong>"命令跳到文件B的标记t位置。如果文件在缓冲区列表中被删除，小写字母标记就丢失了。</p>
<p>大写字母标记是全局的，它在文件间都有效。如果在文件A中定义一个标记T，那么当使用命令"<strong>'T</strong>"时，就会跳到文件A的标记T位置，不管你当前处于哪个文件中。</p>
<p>设定一个标记很简单，使用命令"<strong>m{a-zA-Z}</strong>"就可以了。例如，命令"<strong>mt</strong>"在把当前光标位置设定为标记t；命令"<strong>mT</strong>"把当前光标位置设定为标记T。(<strong>:help m</strong>)</p>
<p>要跳转到指定的标记，使用命令"<strong>'{a-zA-Z}</strong>"或"<strong>{a-zA-Z}</strong>"。例如，命令"<strong>'t</strong>"会跳转到标记t；命令"<strong>'T</strong>"会跳转到标记T。( <strong>:help '</strong>)</p>
<p>单引号和反引号的区别和上面所讲的一样，"<strong>`</strong>"在跳转时会精确到列，而"<strong>'</strong>"不会回到跳转时光标所在的那一列，而是把光标放在第一个非空白字符上。</p>
<p>标记也可以被删除，使用命令"<strong>:delmarks</strong>"可以删除指定标记。命令"<strong>:marks</strong>"列出所有的标记。</p>
<p>关于标记，有两个非常有用的插件，一个是ShowMarks，另外一个叫marks browser。</p>
<p><a href="http://www.vim.org/scripts/script.php?script_id=152">ShowMarks</a>是我最常用的插件之一，它使用vim提供的sign功能以及高亮功能显示出标记的位置。这样，你在设定了一个标记后，它就会在你的vim窗口中显示出标记的名字，并高亮这一行。</p>
<p>在你的$HOME/.vim目录把它解压，然后进行简单设置。 在我的vimrc中，对ShowMarks进行了如下配置：</p>
<div class="hlcode"><pre><span class="s">&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span>
<span class="s">&quot; showmarks setting</span>
<span class="s">&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span>
<span class="s">&quot; Enable ShowMarks</span>
<span class="n">let</span> <span class="n">showmarks_enable</span> <span class="o">=</span> <span class="mi">1</span>
<span class="s">&quot; Show which marks</span>
<span class="n">let</span> <span class="n">showmarks_include</span> <span class="o">=</span> <span class="s">&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span>
<span class="s">&quot; Ignore help, quickfix, non-modifiable buffers</span>
<span class="n">let</span> <span class="n">showmarks_ignore_type</span> <span class="o">=</span> <span class="s">&quot;hqm&quot;</span>
<span class="s">&quot; Hilight lower &amp; upper marks</span>
<span class="n">let</span> <span class="n">showmarks_hlline_lower</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">let</span> <span class="n">showmarks_hlline_upper</span> <span class="o">=</span> <span class="mi">1</span> 
</pre></div>


<p>首先，使能showmarks插件，然后定义showmarks只显示全部的大写标记和小写，并高亮这两种标记；对文件类型为help、quickfix和不可修改的缓冲区，则不显示标记的位置。</p>
<p>你可以定义自己的颜色来高亮标记所在的行，下面是我的定义，我把它放在<a href="https://blog.easwy.com/archives/advanced-vim-skills-syntax-on-colorscheme/">我自己的colorscheme文件</a>中：</p>
<div class="hlcode"><pre><span class="s">&quot; For showmarks plugin</span>
<span class="n">hi</span> <span class="n">ShowMarksHLl</span> <span class="n">ctermbg</span><span class="o">=</span><span class="n">Yellow</span>   <span class="n">ctermfg</span><span class="o">=</span><span class="n">Black</span>  <span class="n">guibg</span><span class="o">=</span><span class="err">#</span><span class="n">FFDB72</span>    <span class="n">guifg</span><span class="o">=</span><span class="n">Black</span>
<span class="n">hi</span> <span class="n">ShowMarksHLu</span> <span class="n">ctermbg</span><span class="o">=</span><span class="n">Magenta</span>  <span class="n">ctermfg</span><span class="o">=</span><span class="n">Black</span>  <span class="n">guibg</span><span class="o">=</span><span class="err">#</span><span class="n">FFB3FF</span>    <span class="n">guifg</span><span class="o">=</span><span class="n">Black</span> 
</pre></div>


<p>ShowMarks插件中已经定义了一些快捷键：</p>
<div class="hlcode"><pre><span class="nt">&lt;Leader&gt;</span>mt   - 打开/关闭ShowMarks插件
<span class="nt">&lt;Leader&gt;</span>mo   - 强制打开ShowMarks插件
<span class="nt">&lt;Leader&gt;</span>mh   - 清除当前行的标记
<span class="nt">&lt;Leader&gt;</span>ma   - 清除当前缓冲区中所有的标记
<span class="nt">&lt;Leader&gt;</span>mm   - 在当前行打一个标记，使用下一个可用的标记名 
</pre></div>


<p>我最常使用的是"<strong><Leader>mm</strong>"和"<strong><Leader>mh</strong>"，用起来非常方便。在我的vimrc中，把<a href="https://blog.easwy.com/archives/advanced-vim-skills-introduce-vimrc/">Leader定义为"<em>,</em>"</a>，所以每次都使用"<strong>,mm</strong>"和"<strong>,mh</strong>"来设置和删除mark。</p>
<p>在vim 7.0中，如果大写的标记被定义了，那么函数line()无论在哪个缓冲区里都会返回该标记的行号，导致showmarks在每个缓冲区里都会把这个大写标记显示出来。因此我为这个插件打了个补丁来修正此问题。</p>
<p>vim 7.0中也可以真正的删除一个mark标记，所以也改了showmarks插件的删除标记功能。原来的功能在删除标记时，并未真正删除它，只是把这个标记指向缓冲区的第一行；现在则是真正删除此标记。</p>
<h3 id="_13">折行</h3>
<p>在文件比较大时，在文件中移动也许会比较费力。这个时候，你可以根据自己的需要把暂时不会访问的文本折叠起来，既减少了对空间的占用，移动速度也会快很多。</p>
<p>vim提供了多种方法来进行折叠，既可以手动折叠，也可以根据缩进、语法，或使用表达式来进行折叠。</p>
<p>程序文件一般都具有良好的结构，所以根据语法进行折叠是一个不错的选择。</p>
<p>要启用折叠，首先要使能'<em>foldenable</em>'选项，这个选项是局部于窗口的选项，因此可以为每个窗口定义不同的折叠。</p>
<p>接下来，设置'<em>foldmethod</em>'选项，对于程序，我们可以选择根据语法高亮进行折叠。需注意的，要根据语法高亮进行折叠，必须打开文件类型检测和语法高亮功能，请参见我前面的文章。</p>
<p>下面是我的vimrc中的设置，它使用了自动命令，如果发现文件类型为c或cpp，就启用折叠功能，并按语法进行折叠：</p>
<div class="hlcode"><pre><span class="n">autocmd</span> <span class="n">FileType</span> <span class="n">c</span><span class="p">,</span><span class="n">cpp</span>  <span class="n">setl</span> <span class="n">fdm</span><span class="o">=</span><span class="n">syntax</span> <span class="o">|</span> <span class="n">setl</span> <span class="n">fen</span> 
</pre></div>


<p>注意，vim的很多命令、选项名都有简写形式，在帮助手册中可以看到简写形式，也可以按简写形式来help，例如，要查看'<em>foldmethod</em>'选项的帮助，可以只输入"<strong>:help 'fdm'</strong>"。</p>
<h3 id="zz">ZZ</h3>
<p>没有修改文件直接退出，如果修改了文件保存后退出</p>
<h2 id="_14">插入模式</h2>
<p>输入 i 或 a 进入插入模式</p>
<h2 id="_15">底行/命令模式</h2>
<p>通过「: / ? !」可以进入命令模式，分别对应的是：执行内部命令、向上或向下搜索、执行外部命令</p>
<h3 id="help">help 帮助</h3>
<div class="hlcode"><pre><span class="o">:</span><span class="n">help</span>
</pre></div>


<h3 id="colo">colo 颜色</h3>
<p>/usr/share/vim/vim72/colors</p>
<div class="hlcode"><pre><span class="n">blue</span><span class="p">.</span><span class="n">vim</span>
<span class="n">darkblue</span><span class="p">.</span><span class="n">vim</span>
<span class="k">default</span><span class="p">.</span><span class="n">vim</span>
<span class="n">delek</span><span class="p">.</span><span class="n">vim</span>
<span class="n">desert</span><span class="p">.</span><span class="n">vim</span>
<span class="n">elflord</span><span class="p">.</span><span class="n">vim</span>
<span class="n">evening</span><span class="p">.</span><span class="n">vim</span>
<span class="n">koehler</span><span class="p">.</span><span class="n">vim</span>
<span class="n">morning</span><span class="p">.</span><span class="n">vim</span>
<span class="n">murphy</span><span class="p">.</span><span class="n">vim</span>
<span class="n">pablo</span><span class="p">.</span><span class="n">vim</span>
<span class="n">peachpuff</span><span class="p">.</span><span class="n">vim</span>
<span class="n">ron</span><span class="p">.</span><span class="n">vim</span>
<span class="n">shine</span><span class="p">.</span><span class="n">vim</span>
<span class="n">slate</span><span class="p">.</span><span class="n">vim</span>
<span class="n">torte</span><span class="p">.</span><span class="n">vim</span>
<span class="n">zellner</span><span class="p">.</span><span class="n">vim</span>
</pre></div>


<h3 id="_16">读文件</h3>
<p>不知道经常用vim的同学有没有一个体验，经常会打开一个文件、复制内容、关闭文件、打开另一个文件、然后粘贴进去复制到内容。编辑器之神难道体验这么差？其实有更好的办法，那就是：</p>
<div class="hlcode"><pre><span class="o">:</span><span class="nx">read</span> <span class="nx">filename</span>
</pre></div>


<h3 id="_17">缓冲区跳转</h3>
<p><code>ctrl + ^</code> 是最常用的方式，来切换当前缓冲区和上一个缓冲区。这样非常方便来回编辑两个文件。缓冲区还提供了很多跳转命令：</p>
<div class="hlcode"><pre><span class="o">:</span><span class="nx">ls</span><span class="p">,</span> <span class="o">:</span><span class="nx">buffers</span>      <span class="err">列出所有缓冲区</span>
<span class="o">:</span><span class="nx">bn</span><span class="p">[</span><span class="nx">ext</span><span class="p">]</span>            <span class="err">下一个缓冲区</span>
<span class="o">:</span><span class="nx">bp</span><span class="p">[</span><span class="nx">revious</span><span class="p">]</span>        <span class="err">上一个缓冲区</span>
<span class="o">:</span><span class="nx">b</span> <span class="p">{</span><span class="nx">number</span><span class="p">,</span> <span class="nx">expression</span><span class="p">}</span>    <span class="err">跳转到指定缓冲区</span>
</pre></div>


<p><code>:ls</code> 然后输入编号是我常用的一种方式，可以快速跳转到对应文件。</p>
<h3 id="_18">展示窗口</h3>
<p>当修改某一个窗口的文件时，其他窗口都会同步更新</p>
<div class="hlcode"><pre><span class="o">:</span><span class="n">split</span> <span class="n">filename</span> <span class="err">或</span> <span class="o">:</span><span class="n">vsplit</span> <span class="n">filename</span> <span class="err">命令在多个窗口打开一个文件</span>
</pre></div>


<div class="hlcode"><pre><span class="o">:</span><span class="n">tabedit</span> <span class="n">filename</span> <span class="err">在另一个标签页中打开一个文件，在这个标签页中又可以打开多个窗口。</span>
</pre></div>


<p>使用 ctrl + w 可以在个窗口之间跳转，使用 ctrl + 方向键可以按照方向切换窗口。</p>
<h3 id="_19">搜索</h3>
<p>用<code>vimgrep</code>还是比较快捷的。</p>
<div class="hlcode"><pre><span class="nx">vimgrep</span> <span class="o">/</span><span class="err">匹配模式</span><span class="o">/</span><span class="p">[</span><span class="nx">g</span><span class="p">][</span><span class="nx">j</span><span class="p">]</span> <span class="err">要搜索的文件</span><span class="o">/</span><span class="err">范围</span>
<span class="nx">g</span><span class="err">：表示是否把每一行的多个匹配结果都加入</span>
<span class="nx">j</span><span class="err">：表示是否搜索完后定位到第一个匹配位置</span>

<span class="nx">vimgrep</span> <span class="o">/</span><span class="nx">pattern</span><span class="o">/</span> <span class="o">%</span>           <span class="err">在当前打开文件中查找</span>
<span class="nx">vimgrep</span> <span class="o">/</span><span class="nx">pattern</span><span class="o">/</span> <span class="o">*</span>             <span class="err">在当前目录下查找所有</span>
<span class="nx">vimgrep</span> <span class="o">/</span><span class="nx">pattern</span><span class="o">/</span> <span class="o">**</span>            <span class="err">在当前目录及子目录下查找所有</span>
<span class="nx">vimgrep</span> <span class="o">/</span><span class="nx">pattern</span><span class="o">/</span> <span class="o">*</span><span class="p">.</span><span class="nx">c</span>          <span class="err">查找当前目录下所有</span><span class="p">.</span><span class="nx">c</span><span class="err">文件</span>
<span class="nx">vimgrep</span> <span class="o">/</span><span class="nx">pattern</span><span class="o">/</span> <span class="o">**</span><span class="err">/*         只查找子目录</span>

<span class="nx">cn</span>                             <span class="err">查找下一个</span>
<span class="nx">cp</span>                             <span class="err">查找上一个</span>
<span class="nx">cw</span>                            <span class="err">打开</span><span class="nx">quickfix</span>
</pre></div>


<p>在<code>quickfix</code>里面一样可以快捷的跳转。</p>
<h3 id="_20">区域选择</h3>
<p>区域选择也是个非常常用的命令，其命令格式为</p>
<div class="hlcode"><pre><span class="o">&lt;</span><span class="nx">action</span><span class="o">&gt;</span><span class="nx">a</span><span class="o">&lt;</span><span class="nx">object</span><span class="o">&gt;</span> <span class="err">和</span> <span class="o">&lt;</span><span class="nx">action</span><span class="o">&gt;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">object</span><span class="o">&gt;</span>
</pre></div>


<ul>
<li>action可以是任何的命令，如 d (删除), y (拷贝), v (可以视模式选择)。</li>
<li>object 可能是： w 一个单词， W 一个以空格为分隔的单词， s 一个句字， p 一个段落。也可以是一个特别的字符："、 '、 )、 }、 ]。</li>
</ul>
<h3 id="_21">宏录制</h3>
<div class="hlcode"><pre><span class="nx">qa</span> <span class="err">把你的操作记录在寄存器</span> <span class="nx">a</span><span class="err">。</span>
<span class="err">@</span><span class="nx">a</span> <span class="err">会</span><span class="nx">replay</span><span class="err">被录制的宏。</span>
<span class="err">@@</span> <span class="err">是一个快捷键用来</span><span class="nx">replay</span><span class="err">最新录制的宏。</span>
</pre></div>


<h3 id="_22">统计文本行数和当前光标的位置</h3>
<div class="hlcode"><pre><span class="n">ctrl</span> <span class="o">+</span> <span class="n">g</span>
</pre></div>


<h3 id="_23">统计字节数</h3>
<div class="hlcode"><pre><span class="n">g</span> <span class="o">+</span> <span class="n">ctrl</span> <span class="o">+</span> <span class="n">g</span>
</pre></div>


<h3 id="_24">文本行翻转</h3>
<div class="hlcode"><pre><span class="o">:</span><span class="n">g</span><span class="o">/^/</span><span class="n">m</span> <span class="mi">0</span>
</pre></div>


<h3 id="1100">插入一个1到100的序列</h3>
<div class="hlcode"><pre><span class="o">:</span><span class="n">r</span><span class="o">!</span><span class="n">seq</span> <span class="mi">100</span>
</pre></div>


<h3 id="_25">每一行文字前面增加序号</h3>
<div class="hlcode"><pre><span class="o">:</span><span class="n">let</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span> <span class="o">|</span> <span class="n">g</span> <span class="o">/^/</span> <span class="n">s</span><span class="c1">//\=i.&quot;. &quot;/ | let i+=1</span>
</pre></div>


<h3 id="java-apache-eclipse">所有后缀为 java 的文件中的 apache 替换成 eclipse</h3>
<p>当前目录执行</p>
<div class="hlcode"><pre><span class="n">vim</span>
<span class="o">:</span><span class="n">n</span> <span class="o">**/*.</span><span class="n">java</span>
<span class="o">:</span><span class="n">argdo</span> <span class="o">%</span><span class="n">s</span><span class="sr">/apache/eclipse/g</span><span class="n">e</span> <span class="o">|</span> <span class="n">update</span> 
</pre></div>


<h2 id="vimrc">vimrc</h2>
<p>用户目录下的.vimrc文件就是Vim针对当前用户的主配置文件，该文件不是必备的，没有的话就创建它。文件位于当前用户的主目录下，可以用 ~/.vimrc 找到，Vim启动时会自动运行文件中的每条命令。</p>
<p><code>.vimrc</code>的注释用双引号"表示</p>
<div class="hlcode"><pre><span class="nx">syn</span> <span class="k">on</span>                      <span class="s2">&quot;语法支持</span>

<span class="s2"># 然后在  set backspace=2下面一行插入如下代码</span>
<span class="s2">set ai                  &quot;</span> <span class="nx">auto</span> <span class="nx">indenting</span>
<span class="nb">set</span> <span class="nx">ruler</span>               <span class="s2">&quot; show the cursor position</span>
<span class="s2">set hlsearch            &quot;</span> <span class="nx">highlight</span> <span class="nx">the</span> <span class="nb">last</span> <span class="nx">searched</span> <span class="nx">term</span>
<span class="nb">set</span> <span class="n">history</span><span class="o">=</span><span class="mi">1000</span>        <span class="s2">&quot; keep 1000 lines of history</span>
<span class="s2">syntax on               &quot;</span> <span class="nx">syntax</span> <span class="nx">highlighting</span>
<span class="nx">filetype</span> <span class="nx">plugin</span> <span class="k">on</span>      <span class="s2">&quot; use the file type plugins</span>

<span class="s2">set bs=2                    &quot;</span><span class="nx">在insert模式下用退格键删除</span>
<span class="nb">set</span> <span class="nx">showmatch</span>               <span class="s2">&quot;代码匹配</span>
<span class="s2">set laststatus=2            &quot;</span><span class="nx">总是显示状态行</span>
<span class="nb">set</span> <span class="nx">expandtab</span>               <span class="s2">&quot;以下三个配置配合使用，设置tab和缩进空格数</span>
<span class="s2">set shiftwidth=4</span>
<span class="s2">set tabstop=4</span>
<span class="s2">set cursorline              &quot;</span><span class="nx">为光标所在行加下划线</span>
<span class="nb">set</span> <span class="nx">number</span>                  <span class="s2">&quot;显示行号</span>
<span class="s2">set autoread                &quot;</span><span class="nx">文件在Vim之外修改过</span><span class="err">，</span><span class="nx">自动重新读入</span>

<span class="nb">set</span> <span class="nb">ignorecase</span>              <span class="s2">&quot;检索时忽略大小写</span>
<span class="s2">set fileencodings=uft-8,gbk &quot;</span><span class="nx">使用utf</span><span class="o">-</span><span class="mi">8</span><span class="nx">或gbk打开文件</span>
<span class="nb">set</span> <span class="nx">hls</span>                     <span class="s2">&quot;检索时高亮显示匹配项</span>
<span class="s2">set helplang=cn             &quot;</span><span class="nx">帮助系统设置为中文</span>
<span class="nb">set</span> <span class="n">foldmethod</span><span class="o">=</span><span class="nx">syntax</span>       <span class="s2">&quot;代码折叠</span>

<span class="s2"># 其它选项</span>
<span class="s2">set nocompatible                 &quot;</span><span class="nx">去掉有关vi一致性模式</span><span class="err">，</span><span class="nx">避免以前版本的bug和局限</span>    
<span class="nb">set</span> <span class="nx">nu</span><span class="o">!</span>                          <span class="s2">&quot;显示行号</span>
<span class="s2">set guifont=Luxi/ Mono/ 9        &quot;</span><span class="nx">设置字体</span><span class="err">，</span><span class="nx">字体名称和字号</span>
<span class="nx">filetype</span> <span class="k">on</span>                      <span class="s2">&quot;检测文件的类型     </span>
<span class="s2">set history=1000                 &quot;</span><span class="nx">记录历史的行数</span>
<span class="nb">set</span> <span class="n">background</span><span class="o">=</span><span class="nx">dark</span>              <span class="s2">&quot;背景使用黑色</span>
<span class="s2">syntax on                        &quot;</span><span class="nx">语法高亮度显示</span>
<span class="nb">set</span> <span class="nx">autoindent</span>                   <span class="s2">&quot;vim使用自动对齐，也就是把当前行的对齐格式应用到下一行(自动缩进）</span>
<span class="s2">set cindent                      &quot;</span><span class="err">（</span><span class="nx">cindent是特别针对</span> <span class="nx">C语言语法自动缩进</span><span class="err">）</span>
<span class="nb">set</span> <span class="nx">smartindent</span>                  <span class="s2">&quot;依据上面的对齐格式，智能的选择对齐方式，对于类似C语言编写上有用   </span>
<span class="s2">set tabstop=4                    &quot;</span><span class="nx">设置tab键为4个空格</span><span class="err">，</span>
<span class="nb">set</span> <span class="n">shiftwidth</span> <span class="o">=</span><span class="mi">4</span>                <span class="s2">&quot;设置当行之间交错时使用4个空格     </span>
<span class="s2">set ai!                          &quot;</span><span class="nx">设置自动缩进</span> 
<span class="nb">set</span> <span class="nx">showmatch</span>                    <span class="s2">&quot;设置匹配模式，类似当输入一个左括号时会匹配相应的右括号      </span>
<span class="s2">set guioptions-=T                &quot;</span><span class="nx">去除vim的GUI版本中得toolbar</span>   
<span class="nb">set</span> <span class="nx">vb</span> <span class="n">t_vb</span><span class="o">=</span>                     <span class="s2">&quot;当vim进行编辑时，如果命令错误，会发出警报，该设置去掉警报       </span>
<span class="s2">set ruler                        &quot;</span><span class="nx">在编辑过程中</span><span class="err">，</span><span class="nx">在右下角显示光标位置的状态行</span>     
<span class="nb">set</span> <span class="nx">nohls</span>                        <span class="s2">&quot;默认情况下，寻找匹配是高亮度显示，该设置关闭高亮显示     </span>
<span class="s2">set backspace=2                  &quot;</span><span class="nx">设置退格键可用</span>
<span class="nb">set</span> <span class="nx">incsearch</span>                    <span class="s2">&quot;在程序中查询一单词，自动匹配单词的位置；如查询desk单词，当输到/d时， </span>

<span class="s2">&quot;</span> <span class="nx">conf</span> <span class="nb">for</span> <span class="nb">tabs</span><span class="p">,</span> <span class="nx">为标签页进行的配置</span><span class="err">，</span><span class="nx">通过ctrl</span> <span class="nx">h</span><span class="p">/</span><span class="nx">l切换标签等</span>
<span class="k">let</span> <span class="n">mapleader</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span>
<span class="nx">nnoremap</span> <span class="o">&lt;</span><span class="nx">C</span><span class="na">-l</span><span class="o">&gt;</span> <span class="nb">gt</span>
<span class="nx">nnoremap</span> <span class="o">&lt;</span><span class="nx">C</span><span class="na">-h</span><span class="o">&gt;</span> <span class="nb">gT</span>
<span class="nx">nnoremap</span> <span class="o">&lt;</span><span class="nx">leader</span><span class="o">&gt;</span><span class="nb">t</span> <span class="p">:</span> <span class="nx">tabe</span><span class="o">&lt;</span><span class="nx">CR</span><span class="o">&gt;</span>

<span class="s2">&quot;conf for plugins {{ 插件相关的配置</span>
<span class="s2">&quot;</span><span class="nx">状态栏的配置</span> 
<span class="s2">&quot;powerline{</span>
<span class="s2">set guifont=PowerlineSymbols\ for\ Powerline</span>
<span class="s2">set nocompatible</span>
<span class="s2">set t_Co=256</span>
<span class="s2">let g:Powerline_symbols = &#39;fancy&#39;</span>
<span class="s2">&quot;</span><span class="p">}</span>
<span class="s2">&quot;pathogen是Vim用来管理插件的插件</span>
<span class="s2">&quot;</span><span class="nx">pathogen</span><span class="p">{</span>
<span class="nb">call</span> <span class="nx">pathogen</span><span class="vi">#infect</span><span class="p">()</span>
<span class="s2">&quot;}</span>

<span class="s2">&quot;</span><span class="p">}}</span>
</pre></div>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2020 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2020-12-12 14:54:32</p>
      </span>
    </div>

    
    
  </body>
</html>