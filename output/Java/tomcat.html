<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>tomcat - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Java">Java</a>&nbsp;&#187;&nbsp;tomcat
    <span class="updated">Page Updated&nbsp;
      2020-01-31 21:03
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">tomcat</div>

  <p>[toc]</p>
<h1 id="tomcat">Tomcat</h1>
<p>基于Java的Web应用服务器软件</p>
<h2 id="_1">安装</h2>
<p>Java 配置</p>
<div class="hlcode"><pre><span class="n">wget</span> <span class="n">https</span><span class="o">:</span><span class="c1">//mirrors.huaweicloud.com/java/jdk/8u201-b09/jdk-8u201-linux-x64.tar.gz</span>

<span class="n">vim</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">profile</span>
<span class="n">export</span> <span class="n">JRE_HOME</span><span class="o">=/</span><span class="n">root</span><span class="o">/</span><span class="n">java_web</span><span class="o">/</span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_201</span><span class="o">/</span><span class="n">jre</span>
<span class="n">export</span> <span class="n">JAVA_HOME</span><span class="o">=/</span><span class="n">root</span><span class="o">/</span><span class="n">java_web</span><span class="o">/</span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_201</span>
<span class="n">export</span> <span class="n">JAVA_BIN</span><span class="o">=/</span><span class="n">root</span><span class="o">/</span><span class="n">java_web</span><span class="o">/</span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_201</span><span class="o">/</span><span class="n">bin</span>
<span class="n">PATH</span><span class="o">=</span><span class="err">$</span><span class="n">PATH</span><span class="o">:</span><span class="err">$</span><span class="n">JAVA_BIN</span>
</pre></div>


<div class="hlcode"><pre><span class="n">wget</span> <span class="n">https</span><span class="o">:</span><span class="c1">//archive.apache.org/dist/tomcat/tomcat-7/v7.0.65/bin/apache-tomcat-7.0.65.tar.gz</span>

<span class="cp"># 配置环境变量 CATALINA_HOME</span>
<span class="n">export</span> <span class="n">CATALINA_HOME</span><span class="o">=/</span><span class="n">root</span><span class="o">/</span><span class="n">java_web</span><span class="o">/</span><span class="n">apache</span><span class="o">-</span><span class="n">tomcat</span><span class="o">-</span><span class="mf">7.0.65</span>
<span class="n">export</span> <span class="n">TOMCAT_HOME</span><span class="o">=/</span><span class="n">root</span><span class="o">/</span><span class="n">java_web</span><span class="o">/</span><span class="n">apache</span><span class="o">-</span><span class="n">tomcat</span><span class="o">-</span><span class="mf">7.0.65</span>
</pre></div>


<h2 id="_2">启动</h2>
<div class="hlcode"><pre><span class="err">$</span><span class="n">CATALINA_HOME</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">startup</span><span class="p">.</span><span class="n">sh</span>
</pre></div>


<h1 id="_3">目录结构</h1>
<div class="hlcode"><pre><span class="n">bin</span>  <span class="err">#</span> <span class="err">可执行文件</span>
<span class="n">conf</span>    <span class="err">#</span> <span class="err">配置文件</span>
<span class="n">lib</span>     <span class="err">#</span> <span class="n">tomcat</span> <span class="err">的依赖库</span>
<span class="n">LICENSE</span>
<span class="n">logs</span>        <span class="err">#</span> <span class="err">日志</span>
<span class="n">NOTICE</span>
<span class="n">RELEASE</span><span class="o">-</span><span class="n">NOTES</span>
<span class="n">RUNNING</span><span class="p">.</span><span class="n">txt</span>
<span class="n">temp</span>        <span class="err">#</span> <span class="err">临时文件夹</span>
<span class="n">webapps</span>     <span class="err">#</span> <span class="err">默认的应用部署目录</span><span class="n">i</span>
<span class="n">work</span>    <span class="err">#</span> <span class="err">供</span><span class="n">web</span> <span class="err">应用使用</span>
</pre></div>


<h2 id="bin">bin</h2>
<p>含有启动脚本</p>
<p>通过环境变量JAVA_OPTS 配置JVM的启动参数</p>
<h2 id="conf">conf</h2>
<p>server.xml 重要的配置文件</p>
<div class="hlcode"><pre><span class="nt">&lt;Server&gt;</span>
    <span class="nt">&lt;Service&gt;</span>   #可以多个
        <span class="nt">&lt;Connector&gt;</span> #可以多个，接收用户请求
            <span class="nt">&lt;Engine&gt;</span>    #一个Service 对应一个Engine，处理connector接收到的请求
                <span class="nt">&lt;Host&gt;</span>  #可以多个，虚拟主机的概念
                    <span class="nt">&lt;Context&gt;</span>   #可以多个，即对应一个Web应用
                    <span class="nt">&lt;/Context&gt;</span>
                <span class="nt">&lt;/Host&gt;</span>
            <span class="nt">&lt;/Engine&gt;</span>
        <span class="nt">&lt;/Connector&gt;</span>
    <span class="nt">&lt;/Service&gt;</span>
<span class="nt">&lt;/Server&gt;</span>
</pre></div>


<h3 id="serverxml">server.xml</h3>
<p><Connector> 用于定义端口号</p>
<h2 id="connector">Connector</h2>
<p>Coyote实现</p>
<p>默认是BIO Connector</p>
<p>完成网络相关处理</p>
<h2 id="container">Container</h2>
<p>通过Catalina组件实现</p>
<p>执行web应用的代码</p>
<h2 id="lib">lib</h2>
<p>存放Tomcat服务器的jar包</p>
<h2 id="logs">logs</h2>
<p>存放tomcat服务器的日志文件</p>
<h2 id="webapps">webapps</h2>
<p>Web应用的部署目录</p>
<h2 id="work">work</h2>
<p>Tomcat的工作目录</p>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2020 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2020-12-12 14:54:32</p>
      </span>
    </div>

    
    
  </body>
</html>