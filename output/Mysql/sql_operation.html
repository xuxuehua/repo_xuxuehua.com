<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>sql_operation - Xu XueHua</title>
    <meta name="keywords" content="Xu XueHua"/>
    <meta name="description" content="Xu XueHua's public notes"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Mysql">Mysql</a>&nbsp;&#187;&nbsp;sql_operation
    <span class="updated">Page Updated&nbsp;
      2018-12-20 21:49
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">sql_operation</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#ddl">DDL 数据定义语言</a><ul>
<li><a href="#create">CREATE</a><ul>
<li><a href="#copy-table">copy table</a></li>
</ul>
</li>
<li><a href="#alter">ALTER</a></li>
<li><a href="#drop">DROP</a></li>
</ul>
</li>
<li><a href="#dml">DML 数据操作语言</a><ul>
<li><a href="#insert">INSERT</a><ul>
<li><a href="#insert-from-select-response">insert from select response</a></li>
</ul>
</li>
<li><a href="#delete">DELETE</a></li>
<li><a href="#update">UPDATE</a></li>
<li><a href="#select">SELECT</a><ul>
<li><a href="#query_cache_type">query_cache_type</a></li>
<li><a href="#as">AS 别名</a></li>
<li><a href="#where">WHERE 子句</a><ul>
<li><a href="#_1">过滤条件</a></li>
<li><a href="#_2">算数操作符</a></li>
<li><a href="#_3">比较操作符</a></li>
<li><a href="#like">LIKE</a></li>
<li><a href="#is-null">IS NULL</a></li>
<li><a href="#_4">逻辑运算符</a></li>
</ul>
</li>
<li><a href="#group-by">GROUP BY 子句</a></li>
<li><a href="#having">HAVING</a></li>
<li><a href="#order-by">ORDER BY</a></li>
<li><a href="#limit">LIMIT</a><ul>
<li><a href="#_5">查询结果加锁</a></li>
</ul>
</li>
<li><a href="#distinct">DISTINCT 去重</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_6">多表查询</a><ul>
<li><a href="#cross-join">交叉连接 （笛卡尔积）CROSS JOIN</a></li>
<li><a href="#_7">等值连接</a></li>
<li><a href="#_8">非等值连接</a></li>
<li><a href="#_9">外连接</a><ul>
<li><a href="#_10">左外连接</a></li>
<li><a href="#_11">右外连接</a></li>
</ul>
</li>
<li><a href="#_12">自连接</a></li>
</ul>
</li>
<li><a href="#_13">子查询</a><ul>
<li><a href="#where_1">WHERE</a></li>
<li><a href="#from">FROM</a></li>
<li><a href="#exists">EXISTS</a></li>
<li><a href="#in">IN</a></li>
<li><a href="#union">UNION 联合查询</a></li>
</ul>
</li>
<li><a href="#example">example</a><ul>
<li><a href="#_14">重复记录</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="ddl">DDL 数据定义语言</h1>
<h2 id="create">CREATE</h2>
<p>DB 组件：数据库，表，索引，视图，用户，存储过程，存储函数，触发器，事件调度器等</p>
<div class="hlcode"><pre><span class="nx">mysql</span><span class="o">&gt;</span> <span class="nx">help</span> <span class="nb">CREATE</span>
<span class="nx">Many</span> <span class="nx">help</span> <span class="nx">items</span> <span class="nb">for</span> <span class="nx">your</span> <span class="nx">request</span> <span class="nx">exist.</span>
<span class="k">To</span> <span class="nx">make</span> <span class="nx">a</span> <span class="nx">more</span> <span class="nx">specific</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">please</span> <span class="k">type</span> <span class="s1">&#39;help &lt;item&gt;&#39;</span><span class="p">,</span>
<span class="k">where</span> <span class="o">&lt;</span><span class="nb">item</span><span class="o">&gt;</span> <span class="nx">is</span> <span class="nx">one</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">following</span>
<span class="nx">topics</span><span class="p">:</span>
   <span class="nb">CREATE</span> <span class="nx">DATABASE</span>
   <span class="nb">CREATE</span> <span class="nx">EVENT</span>
   <span class="nb">CREATE</span> <span class="nx">FUNCTION</span>
   <span class="nb">CREATE</span> <span class="nx">FUNCTION</span> <span class="nx">UDF</span>
   <span class="nb">CREATE</span> <span class="nb">INDEX</span>
   <span class="nb">CREATE</span> <span class="nx">PROCEDURE</span>
   <span class="nb">CREATE</span> <span class="nx">RESOURCE</span> <span class="k">GROUP</span>
   <span class="nb">CREATE</span> <span class="nx">ROLE</span>
   <span class="nb">CREATE</span> <span class="nx">SERVER</span>
   <span class="nb">CREATE</span> <span class="nx">SPATIAL</span> <span class="nb">REFERENCE</span> <span class="nx">SYSTEM</span>
   <span class="nb">CREATE</span> <span class="nb">TABLE</span>
   <span class="nb">CREATE</span> <span class="nx">TABLESPACE</span>
   <span class="nb">CREATE</span> <span class="nb">TRIGGER</span>
   <span class="nb">CREATE</span> <span class="nb">USER</span>
   <span class="nb">CREATE</span> <span class="nx">VIEW</span>
   <span class="nx">SHOW</span>
   <span class="nx">SHOW</span> <span class="nb">CREATE</span> <span class="nx">DATABASE</span>
   <span class="nx">SHOW</span> <span class="nb">CREATE</span> <span class="nx">EVENT</span>
   <span class="nx">SHOW</span> <span class="nb">CREATE</span> <span class="nx">FUNCTION</span>
   <span class="nx">SHOW</span> <span class="nb">CREATE</span> <span class="nx">PROCEDURE</span>
   <span class="nx">SHOW</span> <span class="nb">CREATE</span> <span class="nb">TABLE</span>
   <span class="nx">SHOW</span> <span class="nb">CREATE</span> <span class="nb">USER</span>
   <span class="nx">SPATIAL</span>
</pre></div>


<h3 id="copy-table">copy table</h3>
<div class="hlcode"><pre><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">new_table_name</span> <span class="p">(</span> <span class="n">like</span> <span class="n">old_table_name</span> <span class="n">including</span> <span class="n">all</span><span class="p">)</span>
</pre></div>


<h2 id="alter">ALTER</h2>
<p>组件同CREATE</p>
<h2 id="drop">DROP</h2>
<p>组件同CREATE</p>
<h1 id="dml">DML 数据操作语言</h1>
<h2 id="insert">INSERT</h2>
<p>一次插入一行或多行数据</p>
<p>每插入一次，会触发index更新一次</p>
<ul>
<li>方法1</li>
</ul>
<div class="hlcode"><pre><span class="n">INSERT</span> <span class="p">[</span><span class="n">LOW_PRIORITY</span> <span class="o">|</span> <span class="n">DELAYED</span> <span class="o">|</span> <span class="n">HIGH_PRIORITY</span><span class="p">]</span> <span class="p">[</span><span class="n">IGNORE</span><span class="p">]</span>
    <span class="p">[</span><span class="n">INTO</span><span class="p">]</span> <span class="n">tbl_name</span>
    <span class="p">[</span><span class="n">PARTITION</span> <span class="p">(</span><span class="n">partition_name</span> <span class="p">[,</span> <span class="n">partition_name</span><span class="p">]</span> <span class="p">...)]</span>
    <span class="p">[(</span><span class="n">col_name</span> <span class="p">[,</span> <span class="n">col_name</span><span class="p">]</span> <span class="p">...)]</span>
    <span class="p">{</span><span class="n">VALUES</span> <span class="o">|</span> <span class="n">VALUE</span><span class="p">}</span> <span class="p">(</span><span class="n">value_list</span><span class="p">)</span> <span class="p">[,</span> <span class="p">(</span><span class="n">value_list</span><span class="p">)]</span> <span class="p">...</span>
    <span class="p">[</span><span class="n">ON</span> <span class="n">DUPLICATE</span> <span class="n">KEY</span> <span class="n">UPDATE</span> <span class="n">assignment_list</span><span class="p">]</span>
</pre></div>


<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">students</span> <span class="p">(</span><span class="n">Name</span><span class="p">,</span><span class="n">Age</span><span class="p">,</span><span class="n">Gender</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="err">&#39;</span><span class="n">Jingjiao</span> <span class="n">King</span><span class="err">&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">);</span>
</pre></div>


<ul>
<li>方法2</li>
</ul>
<div class="hlcode"><pre><span class="n">INSERT</span> <span class="p">[</span><span class="n">LOW_PRIORITY</span> <span class="o">|</span> <span class="n">DELAYED</span> <span class="o">|</span> <span class="n">HIGH_PRIORITY</span><span class="p">]</span> <span class="p">[</span><span class="n">IGNORE</span><span class="p">]</span>
    <span class="p">[</span><span class="n">INTO</span><span class="p">]</span> <span class="n">tbl_name</span>
    <span class="p">[</span><span class="n">PARTITION</span> <span class="p">(</span><span class="n">partition_name</span> <span class="p">[,</span> <span class="n">partition_name</span><span class="p">]</span> <span class="p">...)]</span>
    <span class="n">SET</span> <span class="n">assignment_list</span>
    <span class="p">[</span><span class="n">ON</span> <span class="n">DUPLICATE</span> <span class="n">KEY</span> <span class="n">UPDATE</span> <span class="n">assignment_list</span><span class="p">]</span>
</pre></div>


<div class="hlcode"><pre><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">students</span> <span class="n">SET</span> <span class="n">Name</span><span class="o">=</span><span class="err">&#39;</span><span class="n">Yinjiao</span> <span class="n">King</span><span class="err">&#39;</span><span class="p">,</span> <span class="n">Age</span><span class="o">=</span><span class="mi">98</span><span class="p">,</span> <span class="n">Gender</span><span class="o">=</span><span class="sc">&#39;M&#39;</span><span class="p">;</span>
</pre></div>


<ul>
<li>方法3</li>
</ul>
<div class="hlcode"><pre><span class="n">INSERT</span> <span class="p">[</span><span class="n">LOW_PRIORITY</span> <span class="o">|</span> <span class="n">HIGH_PRIORITY</span><span class="p">]</span> <span class="p">[</span><span class="n">IGNORE</span><span class="p">]</span>
    <span class="p">[</span><span class="n">INTO</span><span class="p">]</span> <span class="n">tbl_name</span>
    <span class="p">[</span><span class="n">PARTITION</span> <span class="p">(</span><span class="n">partition_name</span> <span class="p">[,</span> <span class="n">partition_name</span><span class="p">]</span> <span class="p">...)]</span>
    <span class="p">[(</span><span class="n">col_name</span> <span class="p">[,</span> <span class="n">col_name</span><span class="p">]</span> <span class="p">...)]</span>
    <span class="n">SELECT</span> <span class="p">...</span>
    <span class="p">[</span><span class="n">ON</span> <span class="n">DUPLICATE</span> <span class="n">KEY</span> <span class="n">UPDATE</span> <span class="n">assignment_list</span><span class="p">]</span>
</pre></div>


<h3 id="insert-from-select-response">insert from select response</h3>
<div class="hlcode"><pre><span class="n">insert</span> <span class="n">into</span> <span class="nf">NEW_TABLE</span> <span class="p">(</span><span class="n">select</span> <span class="o">*</span> <span class="n">from</span> <span class="n">OLD_TABLE</span> <span class="n">where</span> <span class="n">id</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
</pre></div>


<h2 id="delete">DELETE</h2>
<p>一定要加上的限制条件，否则将清空表中的所有数据。</p>
<p>如WHERE，LIMIT</p>
<div class="hlcode"><pre><span class="n">Single</span><span class="o">-</span><span class="n">Table</span> <span class="n">Syntax</span>
<span class="n">DELETE</span> <span class="p">[</span><span class="n">LOW_PRIORITY</span><span class="p">]</span> <span class="p">[</span><span class="n">QUICK</span><span class="p">]</span> <span class="p">[</span><span class="n">IGNORE</span><span class="p">]</span> <span class="n">FROM</span> <span class="n">tbl_name</span>
    <span class="p">[</span><span class="n">PARTITION</span> <span class="p">(</span><span class="n">partition_name</span> <span class="p">[,</span> <span class="n">partition_name</span><span class="p">]</span> <span class="p">...)]</span>
    <span class="p">[</span><span class="n">WHERE</span> <span class="n">where_condition</span><span class="p">]</span>
    <span class="p">[</span><span class="n">ORDER</span> <span class="n">BY</span> <span class="p">...]</span>
    <span class="p">[</span><span class="n">LIMIT</span> <span class="n">row_count</span><span class="p">]</span>
</pre></div>


<h2 id="update">UPDATE</h2>
<p>一定要加上的限制条件，否则将修改表中所有行的字段。</p>
<p>如WHERE，LIMIT</p>
<div class="hlcode"><pre><span class="n">Single</span><span class="o">-</span><span class="n">table</span> <span class="n">syntax</span><span class="o">:</span>

<span class="n">UPDATE</span> <span class="p">[</span><span class="n">LOW_PRIORITY</span><span class="p">]</span> <span class="p">[</span><span class="n">IGNORE</span><span class="p">]</span> <span class="n">table_reference</span>
    <span class="n">SET</span> <span class="n">assignment_list</span>
    <span class="p">[</span><span class="n">WHERE</span> <span class="n">where_condition</span><span class="p">]</span>
    <span class="p">[</span><span class="n">ORDER</span> <span class="n">BY</span> <span class="p">...]</span>
    <span class="p">[</span><span class="n">LIMIT</span> <span class="n">row_count</span><span class="p">]</span>
</pre></div>


<h2 id="select">SELECT</h2>
<p>查询执行路径中的组件：查询缓存，解析器，预处理器，优化器，查询执行引擎，存储引擎</p>
<p>关键字的顺序是不能颠倒</p>
<div class="hlcode"><pre><span class="n">SELECT</span> <span class="p">...</span> <span class="n">FROM</span> <span class="p">...</span> <span class="n">WHERE</span> <span class="p">...</span> <span class="n">GROUP</span> <span class="n">BY</span> <span class="p">...</span> <span class="n">HAVING</span> <span class="p">...</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="p">...</span>
</pre></div>


<p>SELECT执行流程</p>
<div class="hlcode"><pre><span class="n">FROM</span> <span class="n">Clause</span> <span class="o">-&gt;</span> <span class="n">WHERE</span> <span class="n">Clause</span> <span class="o">-&gt;</span> <span class="n">GROUP</span> <span class="n">BY</span> <span class="o">-&gt;</span> <span class="n">HAVING</span> <span class="n">Clause</span> <span class="o">-&gt;</span> <span class="n">SELECT</span><span class="err">的字段</span> <span class="o">-&gt;</span> <span class="n">DISTINCT</span> <span class="o">-&gt;</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="o">-&gt;</span> <span class="n">LIMIT</span> <span class="o">-&gt;</span> 
</pre></div>


<div class="hlcode"><pre><span class="n">SELECT</span>
    <span class="p">[</span><span class="n">ALL</span> <span class="o">|</span> <span class="n">DISTINCT</span> <span class="o">|</span> <span class="n">DISTINCTROW</span> <span class="p">]</span>
      <span class="p">[</span><span class="n">HIGH_PRIORITY</span><span class="p">]</span>
      <span class="p">[</span><span class="n">STRAIGHT_JOIN</span><span class="p">]</span>
      <span class="p">[</span><span class="n">SQL_SMALL_RESULT</span><span class="p">]</span> <span class="p">[</span><span class="n">SQL_BIG_RESULT</span><span class="p">]</span> <span class="p">[</span><span class="n">SQL_BUFFER_RESULT</span><span class="p">]</span>
      <span class="p">[</span><span class="n">SQL_CACHE</span> <span class="o">|</span> <span class="n">SQL_NO_CACHE</span><span class="p">]</span> <span class="p">[</span><span class="n">SQL_CALC_FOUND_ROWS</span><span class="p">]</span>
    <span class="n">select_expr</span> <span class="p">[,</span> <span class="n">select_expr</span> <span class="p">...]</span>
    <span class="p">[</span><span class="n">FROM</span> <span class="n">table_references</span>
      <span class="p">[</span><span class="n">PARTITION</span> <span class="n">partition_list</span><span class="p">]</span>
    <span class="p">[</span><span class="n">WHERE</span> <span class="n">where_condition</span><span class="p">]</span>
    <span class="p">[</span><span class="n">GROUP</span> <span class="n">BY</span> <span class="p">{</span><span class="n">col_name</span> <span class="o">|</span> <span class="n">expr</span> <span class="o">|</span> <span class="n">position</span><span class="p">},</span> <span class="p">...</span> <span class="p">[</span><span class="n">WITH</span> <span class="n">ROLLUP</span><span class="p">]]</span>
    <span class="p">[</span><span class="n">HAVING</span> <span class="n">where_condition</span><span class="p">]</span>
    <span class="p">[</span><span class="n">WINDOW</span> <span class="n">window_name</span> <span class="n">AS</span> <span class="p">(</span><span class="n">window_spec</span><span class="p">)</span>
        <span class="p">[,</span> <span class="n">window_name</span> <span class="n">AS</span> <span class="p">(</span><span class="n">window_spec</span><span class="p">)]</span> <span class="p">...]</span>
    <span class="p">[</span><span class="n">ORDER</span> <span class="n">BY</span> <span class="p">{</span><span class="n">col_name</span> <span class="o">|</span> <span class="n">expr</span> <span class="o">|</span> <span class="n">position</span><span class="p">}</span>
      <span class="p">[</span><span class="n">ASC</span> <span class="o">|</span> <span class="n">DESC</span><span class="p">],</span> <span class="p">...</span> <span class="p">[</span><span class="n">WITH</span> <span class="n">ROLLUP</span><span class="p">]]</span>
    <span class="p">[</span><span class="n">LIMIT</span> <span class="p">{[</span><span class="n">offset</span><span class="p">,]</span> <span class="n">row_count</span> <span class="o">|</span> <span class="n">row_count</span> <span class="n">OFFSET</span> <span class="n">offset</span><span class="p">}]</span>
    <span class="p">[</span><span class="n">INTO</span> <span class="n">OUTFILE</span> <span class="err">&#39;</span><span class="n">file_name</span><span class="err">&#39;</span>
        <span class="p">[</span><span class="n">CHARACTER</span> <span class="n">SET</span> <span class="n">charset_name</span><span class="p">]</span>
        <span class="n">export_options</span>
      <span class="o">|</span> <span class="n">INTO</span> <span class="n">DUMPFILE</span> <span class="err">&#39;</span><span class="n">file_name</span><span class="err">&#39;</span>
      <span class="o">|</span> <span class="n">INTO</span> <span class="n">var_name</span> <span class="p">[,</span> <span class="n">var_name</span><span class="p">]]</span>
    <span class="p">[</span><span class="n">FOR</span> <span class="p">{</span><span class="n">UPDATE</span> <span class="o">|</span> <span class="n">SHARE</span><span class="p">}</span> <span class="p">[</span><span class="n">OF</span> <span class="n">tbl_name</span> <span class="p">[,</span> <span class="n">tbl_name</span><span class="p">]</span> <span class="p">...]</span> <span class="p">[</span><span class="n">NOWAIT</span> <span class="o">|</span> <span class="n">SKIP</span> <span class="n">LOCKED</span><span class="p">]</span>
      <span class="o">|</span> <span class="n">LOCK</span> <span class="n">IN</span> <span class="n">SHARE</span> <span class="n">MODE</span><span class="p">]]</span>
</pre></div>


<p>DISTINCT 数据去重</p>
<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">DISTINCT</span> <span class="n">Gender</span> <span class="n">FROM</span> <span class="n">students</span><span class="p">;</span>
<span class="o">+--------+</span>
<span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span>
<span class="o">+--------+</span>
<span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>
<span class="o">+--------+</span>
</pre></div>


<p>SQL_CACHE 显式指定存储查询结果于缓存之中</p>
<p>SQL_NO_CACHE 显式查询结果不予缓存</p>
<h3 id="query_cache_type">query_cache_type</h3>
<div class="hlcode"><pre><span class="n">query_cache_type</span> <span class="err">的值为</span><span class="n">ON</span><span class="err">时，查询缓存功能打开</span>
<span class="n">SELECT</span><span class="err">的结果符合缓存条件即会缓存，否则不予缓存</span>
<span class="err">显式指定</span><span class="n">SQL_NO_CACHE</span><span class="err">，不予缓存</span>
</pre></div>


<div class="hlcode"><pre><span class="n">query_cache_type</span> <span class="err">的值为</span><span class="n">DEMAND</span><span class="err">时，查询缓存功能按需进行，</span>
<span class="err">显式指定</span><span class="n">SQL_CACHE</span><span class="err">的</span><span class="n">SELECT</span><span class="err">语句才会缓存，其他不予缓存</span>
</pre></div>


<h3 id="as">AS 别名</h3>
<p>一般来说起别名的作用是对原有名称进行简化，从而让 SQL 语句看起来更精简</p>
<div class="hlcode"><pre><span class="n">col1</span> <span class="n">AS</span> <span class="n">alias1</span><span class="p">,</span> <span class="n">col2</span> <span class="n">AS</span> <span class="n">alias2</span><span class="p">,</span> <span class="p">....</span>
</pre></div>


<div class="hlcode"><pre><span class="n">SELECT</span> <span class="n">name</span> <span class="n">AS</span> <span class="n">n</span><span class="p">,</span> <span class="n">hp_max</span> <span class="n">AS</span> <span class="n">hm</span><span class="p">,</span> <span class="n">mp_max</span> <span class="n">AS</span> <span class="n">mm</span><span class="p">,</span> <span class="n">attack_max</span> <span class="n">AS</span> <span class="n">am</span><span class="p">,</span> <span class="n">defense_max</span> <span class="n">AS</span> <span class="n">dm</span> <span class="n">FROM</span> <span class="n">heros</span><span class="p">;</span>
</pre></div>


<h3 id="where">WHERE 子句</h3>
<p>指明过滤条件以实现“选择” 功能</p>
<h4 id="_1">过滤条件</h4>
<p>布尔表达式</p>
<h4 id="_2">算数操作符</h4>
<div class="hlcode"><pre><span class="o">+</span><span class="err">，</span> <span class="o">-</span><span class="err">，</span> <span class="o">*</span><span class="err">，</span> <span class="o">/</span><span class="err">，</span> <span class="o">%</span>
</pre></div>


<h4 id="_3">比较操作符</h4>
<div class="hlcode"><pre><span class="o">=</span><span class="p">,</span> <span class="o">!=</span><span class="p">,</span> <span class="o">&lt;&gt;</span><span class="p">,</span> <span class="o">&lt;=&gt;</span><span class="p">,</span> <span class="o">&gt;</span><span class="p">,</span> <span class="o">&gt;=</span><span class="p">,</span> <span class="o">&lt;</span><span class="p">,</span> <span class="o">&lt;=</span>
</pre></div>


<div class="hlcode"><pre><span class="n">BETWEEN</span> <span class="n">min_num</span> <span class="n">AND</span> <span class="n">max_num</span>
<span class="n">IN</span> <span class="p">(</span><span class="n">element1</span><span class="p">,</span> <span class="n">element2</span><span class="p">,</span> <span class="p">...)</span>

<span class="n">IS</span> <span class="n">NOT</span> <span class="nb">NULL</span>

<span class="n">RLIKE</span>
<span class="n">REGEXP</span> <span class="err">匹配字符串可以用正则表达式书写模式</span>
</pre></div>


<h4 id="like">LIKE</h4>
<div class="hlcode"><pre><span class="nl">LIKE:</span>
    <span class="o">%</span> <span class="err">任意长度的任意字符</span>
    <span class="n">_</span> <span class="err">任意单个字符</span>
</pre></div>


<div class="hlcode"><pre><span class="n">SELECT</span> <span class="n">name</span> <span class="n">FROM</span> <span class="n">heros</span> <span class="n">WHERE</span> <span class="n">name</span> <span class="n">LIKE</span> <span class="err">&#39;</span><span class="o">%</span><span class="err">太</span><span class="o">%</span><span class="err">&#39;</span>
</pre></div>


<p>实际操作尽量少用通配符，因为它需要消耗数据库更长的时间来进行匹配。即使你对 LIKE 检索的字段进行了索引，索引的价值也可能会失效。如果要让索引生效，那么 LIKE 后面就不能以（%）开头，比如使用LIKE '%太%'或LIKE '%太'的时候就会对全表进行扫描。</p>
<h4 id="is-null">IS NULL</h4>
<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">Name</span><span class="p">,</span> <span class="n">ClassID</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">WHERE</span> <span class="n">ClassID</span> <span class="n">IS</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="o">+---------------+---------+</span>
<span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span>
<span class="o">+---------------+---------+</span>
<span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Jingjiao</span> <span class="n">King</span> <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yinjiao</span> <span class="n">King</span>  <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+---------------+---------+</span>
</pre></div>


<h4 id="_4">逻辑运算符</h4>
<div class="hlcode"><pre><span class="n">NOT</span><span class="p">,</span> <span class="n">AND</span><span class="p">,</span> <span class="n">OR</span><span class="p">,</span> <span class="n">XOR</span><span class="err">（异或）</span>
</pre></div>


<div class="hlcode"><pre><span class="n">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">hp_max</span><span class="p">,</span> <span class="n">mp_max</span> <span class="n">FROM</span> <span class="n">heros</span> <span class="n">WHERE</span> <span class="p">(</span><span class="n">hp_max</span><span class="o">+</span><span class="n">mp_max</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">8000</span> <span class="n">OR</span> <span class="n">hp_max</span> <span class="o">&gt;</span> <span class="mi">6000</span> <span class="n">AND</span> <span class="n">mp_max</span> <span class="o">&gt;</span> <span class="mi">1700</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="p">(</span><span class="n">hp_max</span><span class="o">+</span><span class="n">mp_max</span><span class="p">)</span> <span class="n">DESC</span>
</pre></div>


<h3 id="group-by">GROUP BY 子句</h3>
<p>根据指定的条件把查询结果进行分组，以用于做聚合运算</p>
<div class="hlcode"><pre><span class="n">avg</span><span class="p">(),</span> <span class="n">max</span><span class="p">(),</span> <span class="n">min</span><span class="p">(),</span> <span class="n">count</span><span class="p">(),</span> <span class="n">sum</span><span class="p">()</span>
</pre></div>


<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">avg</span><span class="p">(</span><span class="n">Age</span><span class="p">),</span><span class="n">Gender</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">GROUP</span> <span class="n">BY</span> <span class="n">Gender</span><span class="p">;</span>
<span class="o">+----------+--------+</span>
<span class="o">|</span> <span class="n">avg</span><span class="p">(</span><span class="n">Age</span><span class="p">)</span> <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span>
<span class="o">+----------+--------+</span>
<span class="o">|</span>  <span class="mf">40.7647</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>
<span class="o">|</span>  <span class="mf">19.0000</span> <span class="o">|</span> <span class="n">F</span>      <span class="o">|</span>
<span class="o">+----------+--------+</span>
<span class="mi">2</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h3 id="having">HAVING</h3>
<p>对分组聚合运算后的结果指定过滤条件</p>
<p>HAVING 的作用和 WHERE 一样，都是起到过滤的作用，只不过 WHERE 是用于数据行，而 HAVING 则作用于分组</p>
<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">avg</span><span class="p">(</span><span class="n">Age</span><span class="p">)</span> <span class="n">as</span> <span class="n">AAge</span><span class="p">,</span><span class="n">Gender</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">GROUP</span> <span class="n">BY</span> <span class="n">Gender</span> <span class="n">HAVING</span> <span class="n">AAge</span> <span class="o">&gt;</span><span class="mi">20</span><span class="p">;</span>
<span class="o">+---------+--------+</span>
<span class="o">|</span> <span class="n">AAge</span>    <span class="o">|</span> <span class="n">Gender</span> <span class="o">|</span>
<span class="o">+---------+--------+</span>
<span class="o">|</span> <span class="mf">40.7647</span> <span class="o">|</span> <span class="n">M</span>      <span class="o">|</span>
<span class="o">+---------+--------+</span>
<span class="mi">1</span> <span class="n">row</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">count</span><span class="p">(</span><span class="n">StuID</span><span class="p">)</span> <span class="n">AS</span> <span class="n">NumOfStu</span><span class="p">,</span> <span class="n">ClassID</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">GROUP</span> <span class="n">BY</span> <span class="n">ClassID</span> <span class="n">HAVING</span> <span class="n">NumOfStu</span> <span class="o">&gt;</span><span class="mi">2</span><span class="p">;</span>
<span class="o">+----------+---------+</span>
<span class="o">|</span> <span class="n">NumOfStu</span> <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span>
<span class="o">+----------+---------+</span>
<span class="o">|</span>        <span class="mi">3</span> <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>
<span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span>
<span class="o">|</span>        <span class="mi">3</span> <span class="o">|</span>       <span class="mi">7</span> <span class="o">|</span>
<span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span>
<span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>    <span class="nb">NULL</span> <span class="o">|</span>
<span class="o">+----------+---------+</span>
<span class="mi">7</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h3 id="order-by">ORDER BY</h3>
<p>ORDER BY 后面可以有一个或多个列名，如果是多个列名进行排序，会按照后面第一个列先进行排序，当第一列的值相同的时候，再按照第二列进行排序，以此类推</p>
<p>ORDER BY 可以使用非选择列进行排序，所以即使在 SELECT 后面没有这个列名，你同样可以放到 ORDER BY 后面进行排序</p>
<p>ORDER BY 通常位于 SELECT 语句的最后一条子句，否则会报错</p>
<p>ASC 升序， DESC 降序 </p>
<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">Name</span><span class="p">,</span> <span class="n">Age</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">Age</span> <span class="n">DESC</span>
    <span class="o">-&gt;</span> <span class="p">;</span>
<span class="o">+---------------+-----+</span>
<span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span>
<span class="o">+---------------+-----+</span>
<span class="o">|</span> <span class="n">Jingjiao</span> <span class="n">King</span> <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yinjiao</span> <span class="n">King</span>  <span class="o">|</span>  <span class="mi">98</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span>
<span class="o">+---------------+-----+</span>
<span class="mi">27</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h3 id="limit">LIMIT</h3>
<div class="hlcode"><pre><span class="n">LIMIT</span> <span class="p">[[</span><span class="n">offset</span><span class="p">,]</span> <span class="n">row_count</span><span class="p">]</span> <span class="err">对查询</span>
</pre></div>


<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">Name</span><span class="p">,</span> <span class="n">Age</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">Age</span> <span class="n">DESC</span><span class="p">;</span>
<span class="o">+---------------+-----+</span>
<span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span>
<span class="o">+---------------+-----+</span>
<span class="o">|</span> <span class="n">Jingjiao</span> <span class="n">King</span> <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yinjiao</span> <span class="n">King</span>  <span class="o">|</span>  <span class="mi">98</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span>
<span class="o">+---------------+-----+</span>
<span class="mi">27</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">Name</span><span class="p">,</span> <span class="n">Age</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">Age</span> <span class="n">DESC</span> <span class="n">LIMIT</span> <span class="mi">10</span><span class="p">;</span>
<span class="o">+---------------+-----+</span>
<span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span>
<span class="o">+---------------+-----+</span>
<span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Jingjiao</span> <span class="n">King</span> <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yinjiao</span> <span class="n">King</span>  <span class="o">|</span>  <span class="mi">98</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span>
<span class="o">+---------------+-----+</span>
<span class="mi">10</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">Name</span><span class="p">,</span> <span class="n">Age</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">Age</span> <span class="n">DESC</span> <span class="n">LIMIT</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">;</span>
<span class="o">+---------------+-----+</span>
<span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span>
<span class="o">+---------------+-----+</span>
<span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">+---------------+-----+</span>
<span class="mi">10</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h4 id="_5">查询结果加锁</h4>
<div class="hlcode"><pre><span class="n">FROM</span> <span class="n">UPDATE</span> <span class="err">写锁，排他锁</span>
<span class="n">LOCK</span> <span class="n">IN</span> <span class="n">SHARE</span> <span class="n">MODE</span> <span class="err">读锁，共享锁</span>
</pre></div>


<h3 id="distinct">DISTINCT 去重</h3>
<p>从结果中去掉重复的行</p>
<div class="hlcode"><pre><span class="n">SELECT</span> <span class="n">DISTINCT</span> <span class="n">attack_range</span> <span class="n">FROM</span> <span class="n">heros</span>
</pre></div>


<blockquote>
<p>只对attack_range去重</p>
</blockquote>
<h1 id="_6">多表查询</h1>
<h2 id="cross-join">交叉连接 （笛卡尔积）CROSS JOIN</h2>
<p>笛卡尔乘积是一个数学运算。假设我有两个集合 X 和 Y，那么 X 和 Y 的笛卡尔积就是 X 和 Y 的所有可能组合，也就是第一个对象来自于 X，第二个对象来自于 Y 的所有可能。</p>
<p>作用就是可以把任意表进行连接，即使这两张表不相关。但我们通常进行连接还是需要筛选的，因此你需要在连接后面加上 WHERE 子句，也就是作为过滤条件对连接数据进行筛选。</p>
<div class="hlcode"><pre> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">player</span> <span class="n">CROSS</span> <span class="n">JOIN</span> <span class="n">team</span><span class="p">;</span>
</pre></div>


<h2 id="_7">等值连接</h2>
<p>让表之间的字段以等值建立连接关系</p>
<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">s</span><span class="p">.</span><span class="n">Name</span> <span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">Class</span>  <span class="n">FROM</span> <span class="n">students</span> <span class="n">as</span> <span class="n">s</span><span class="p">,</span> <span class="n">classes</span> <span class="n">as</span> <span class="n">c</span> <span class="n">WHERE</span> <span class="n">s</span><span class="p">.</span><span class="n">ClassID</span><span class="o">=</span><span class="n">c</span><span class="p">.</span><span class="n">ClassID</span><span class="p">;</span>
<span class="o">+---------------+----------------+</span>
<span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Class</span>          <span class="o">|</span>
<span class="o">+---------------+----------------+</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span> <span class="n">Emei</span> <span class="n">Pai</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span> <span class="n">Shaolin</span> <span class="n">Pai</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span> <span class="n">Emei</span> <span class="n">Pai</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span> <span class="n">Wudang</span> <span class="n">Pai</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span> <span class="n">QingCheng</span> <span class="n">Pai</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span> <span class="n">Riyue</span> <span class="n">Shenjiao</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span> <span class="n">QingCheng</span> <span class="n">Pai</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span> <span class="n">Ming</span> <span class="n">Jiao</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span> <span class="n">Lianshan</span> <span class="n">Pai</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span> <span class="n">QingCheng</span> <span class="n">Pai</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span> <span class="n">Lianshan</span> <span class="n">Pai</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span> <span class="n">Shaolin</span> <span class="n">Pai</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span> <span class="n">Emei</span> <span class="n">Pai</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span> <span class="n">QingCheng</span> <span class="n">Pai</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span> <span class="n">Wudang</span> <span class="n">Pai</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span> <span class="n">Shaolin</span> <span class="n">Pai</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span> <span class="n">Wudang</span> <span class="n">Pai</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span> <span class="n">Ming</span> <span class="n">Jiao</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span> <span class="n">Lianshan</span> <span class="n">Pai</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span> <span class="n">Ming</span> <span class="n">Jiao</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span> <span class="n">Lianshan</span> <span class="n">Pai</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span> <span class="n">Shaolin</span> <span class="n">Pai</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span> <span class="n">Wudang</span> <span class="n">Pai</span>     <span class="o">|</span>
<span class="o">+---------------+----------------+</span>
<span class="mi">23</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">s</span><span class="p">.</span><span class="n">Name</span> <span class="p">,</span> <span class="n">t</span><span class="p">.</span><span class="n">Name</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">as</span> <span class="n">s</span><span class="p">,</span> <span class="n">students</span> <span class="n">as</span> <span class="n">t</span> <span class="n">WHERE</span> <span class="n">s</span><span class="p">.</span><span class="n">TeacherID</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">StuID</span><span class="p">;</span>
<span class="o">+---------------+-------------+</span>
<span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Name</span>        <span class="o">|</span>
<span class="o">+---------------+-------------+</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Jingjiao</span> <span class="n">King</span> <span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yinjiao</span> <span class="n">King</span>  <span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>  <span class="o">|</span>
<span class="o">+---------------+-------------+</span>
<span class="mi">7</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h2 id="_8">非等值连接</h2>
<div class="hlcode"><pre><span class="n">SELECT</span> <span class="n">p</span><span class="p">.</span><span class="n">player_name</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">height</span><span class="p">,</span> <span class="n">h</span><span class="p">.</span><span class="n">height_level</span>
<span class="n">FROM</span> <span class="n">player</span> <span class="n">AS</span> <span class="n">p</span><span class="p">,</span> <span class="n">height_grades</span> <span class="n">AS</span> <span class="n">h</span>
<span class="n">WHERE</span> <span class="n">p</span><span class="p">.</span><span class="n">height</span> <span class="n">BETWEEN</span> <span class="n">h</span><span class="p">.</span><span class="n">height_lowest</span> <span class="n">AND</span> <span class="n">h</span><span class="p">.</span><span class="n">height_highest</span>
</pre></div>


<h2 id="_9">外连接</h2>
<p>除了查询满足条件的记录以外，外连接还可以查询某一方不满足条件的记录。两张表的外连接，会有一张是主表，另一张是从表。如果是多张表的外连接，那么第一张表是主表，即显示全部的行，而第剩下的表则显示对应连接的信息。</p>
<h3 id="_10">左外连接</h3>
<p>指左边的表是主表，需要显示左边表的全部行，而右侧的表是从表</p>
<div class="hlcode"><pre><span class="n">FROM</span> <span class="n">tb1</span> <span class="n">LEFT</span> <span class="n">JOIN</span> <span class="n">tb2</span> <span class="n">ON</span> <span class="n">tb1</span><span class="p">.</span><span class="n">col</span><span class="o">=</span><span class="n">tb2</span><span class="p">.</span><span class="n">col</span><span class="p">;</span>
</pre></div>


<div class="hlcode"><pre><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">player</span> <span class="n">LEFT</span> <span class="n">JOIN</span> <span class="n">team</span> <span class="n">on</span> <span class="n">player</span><span class="p">.</span><span class="n">team_id</span> <span class="o">=</span> <span class="n">team</span><span class="p">.</span><span class="n">team_id</span><span class="p">;</span>
</pre></div>


<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">s</span><span class="p">.</span><span class="n">Name</span> <span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">Class</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">as</span> <span class="n">s</span> <span class="n">LEFT</span> <span class="n">JOIN</span> <span class="n">classes</span> <span class="n">AS</span> <span class="n">c</span> <span class="n">ON</span> <span class="n">s</span><span class="p">.</span><span class="n">ClassID</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">ClassID</span><span class="p">;</span>
<span class="o">+---------------+----------------+</span>
<span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Class</span>          <span class="o">|</span>
<span class="o">+---------------+----------------+</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span> <span class="n">Emei</span> <span class="n">Pai</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span> <span class="n">Shaolin</span> <span class="n">Pai</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span> <span class="n">Emei</span> <span class="n">Pai</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span> <span class="n">Wudang</span> <span class="n">Pai</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span> <span class="n">QingCheng</span> <span class="n">Pai</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span> <span class="n">Riyue</span> <span class="n">Shenjiao</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span> <span class="n">QingCheng</span> <span class="n">Pai</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span> <span class="n">Ming</span> <span class="n">Jiao</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span> <span class="n">Lianshan</span> <span class="n">Pai</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span> <span class="n">QingCheng</span> <span class="n">Pai</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span> <span class="n">Lianshan</span> <span class="n">Pai</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span> <span class="n">Shaolin</span> <span class="n">Pai</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span> <span class="n">Emei</span> <span class="n">Pai</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span> <span class="n">QingCheng</span> <span class="n">Pai</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span> <span class="n">Wudang</span> <span class="n">Pai</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span> <span class="n">Shaolin</span> <span class="n">Pai</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span> <span class="n">Wudang</span> <span class="n">Pai</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span> <span class="n">Ming</span> <span class="n">Jiao</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span> <span class="n">Lianshan</span> <span class="n">Pai</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span> <span class="n">Ming</span> <span class="n">Jiao</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span> <span class="n">Lianshan</span> <span class="n">Pai</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span> <span class="n">Shaolin</span> <span class="n">Pai</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span> <span class="n">Wudang</span> <span class="n">Pai</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span> <span class="nb">NULL</span>           <span class="o">|</span>
<span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="nb">NULL</span>           <span class="o">|</span>
<span class="o">|</span> <span class="n">Jingjiao</span> <span class="n">King</span> <span class="o">|</span> <span class="nb">NULL</span>           <span class="o">|</span>
<span class="o">|</span> <span class="n">Yinjiao</span> <span class="n">King</span>  <span class="o">|</span> <span class="nb">NULL</span>           <span class="o">|</span>
<span class="o">+---------------+----------------+</span>
<span class="mi">27</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h3 id="_11">右外连接</h3>
<p>右边的表是主表，需要显示右边表的全部行，而左侧的表是从表。</p>
<div class="hlcode"><pre><span class="n">FROM</span> <span class="n">tb1</span> <span class="n">RIGHT</span> <span class="n">JOIN</span> <span class="n">tb2</span> <span class="n">ON</span> <span class="n">tb1</span><span class="p">.</span><span class="n">col</span><span class="o">=</span><span class="n">tb2</span><span class="p">.</span><span class="n">col</span><span class="p">;</span>
</pre></div>


<div class="hlcode"><pre><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">player</span> <span class="n">RIGHT</span> <span class="n">JOIN</span> <span class="n">team</span> <span class="n">on</span> <span class="n">player</span><span class="p">.</span><span class="n">team_id</span> <span class="o">=</span> <span class="n">team</span><span class="p">.</span><span class="n">team_id</span><span class="p">;</span>
</pre></div>


<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">s</span><span class="p">.</span><span class="n">Name</span> <span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">Class</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">as</span> <span class="n">s</span> <span class="n">RIGHT</span> <span class="n">JOIN</span> <span class="n">classes</span> <span class="n">AS</span> <span class="n">c</span> <span class="n">ON</span> <span class="n">s</span><span class="p">.</span><span class="n">ClassID</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">ClassID</span><span class="p">;</span>
<span class="o">+---------------+----------------+</span>
<span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Class</span>          <span class="o">|</span>
<span class="o">+---------------+----------------+</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span> <span class="n">Emei</span> <span class="n">Pai</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span> <span class="n">Shaolin</span> <span class="n">Pai</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span> <span class="n">Emei</span> <span class="n">Pai</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span> <span class="n">Wudang</span> <span class="n">Pai</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span> <span class="n">QingCheng</span> <span class="n">Pai</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span> <span class="n">Riyue</span> <span class="n">Shenjiao</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span> <span class="n">QingCheng</span> <span class="n">Pai</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span> <span class="n">Ming</span> <span class="n">Jiao</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span> <span class="n">Lianshan</span> <span class="n">Pai</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span> <span class="n">QingCheng</span> <span class="n">Pai</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span> <span class="n">Lianshan</span> <span class="n">Pai</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span> <span class="n">Shaolin</span> <span class="n">Pai</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span> <span class="n">Emei</span> <span class="n">Pai</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span> <span class="n">QingCheng</span> <span class="n">Pai</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span> <span class="n">Wudang</span> <span class="n">Pai</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span> <span class="n">Shaolin</span> <span class="n">Pai</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span> <span class="n">Wudang</span> <span class="n">Pai</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span> <span class="n">Ming</span> <span class="n">Jiao</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span> <span class="n">Lianshan</span> <span class="n">Pai</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span> <span class="n">Ming</span> <span class="n">Jiao</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span> <span class="n">Lianshan</span> <span class="n">Pai</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span> <span class="n">Shaolin</span> <span class="n">Pai</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span> <span class="n">Wudang</span> <span class="n">Pai</span>     <span class="o">|</span>
<span class="o">|</span> <span class="nb">NULL</span>          <span class="o">|</span> <span class="n">Xiaoyao</span> <span class="n">Pai</span>    <span class="o">|</span>
<span class="o">+---------------+----------------+</span>
<span class="mi">24</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h2 id="_12">自连接</h2>
<p>可以对多个表进行操作，也可以对同一个表进行操作。也就是说查询条件使用了当前表的字段</p>
<div class="hlcode"><pre><span class="n">SELECT</span> <span class="n">b</span><span class="p">.</span><span class="n">player_name</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">height</span> <span class="n">FROM</span> <span class="n">player</span> <span class="n">as</span> <span class="n">a</span><span class="p">,</span> <span class="n">player</span> <span class="n">as</span> <span class="n">b</span> <span class="n">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">player_name</span> <span class="o">=</span> <span class="err">&#39;布雷克</span><span class="o">-</span><span class="err">格里芬&#39;</span> <span class="n">and</span> <span class="n">a</span><span class="p">.</span><span class="n">height</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">height</span><span class="p">;</span>
</pre></div>


<h1 id="_13">子查询</h1>
<p>在查询语句嵌套查询语句</p>
<p>基于某语句的查询结果再次进行的查询</p>
<h2 id="where_1">WHERE</h2>
<ul>
<li>基于比较表达式中的子查询，子查询仅能返回单个值</li>
</ul>
<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SElect</span> <span class="n">Name</span><span class="p">,</span> <span class="n">Age</span> <span class="n">from</span> <span class="n">students</span> <span class="n">where</span> <span class="n">Age</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">Select</span> <span class="n">avg</span><span class="p">(</span><span class="n">Age</span><span class="p">)</span> <span class="n">from</span> <span class="n">students</span><span class="p">);</span>
<span class="o">+---------------+-----+</span>
<span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span>
<span class="o">+---------------+-----+</span>
<span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Jingjiao</span> <span class="n">King</span> <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yinjiao</span> <span class="n">King</span>  <span class="o">|</span>  <span class="mi">98</span> <span class="o">|</span>
<span class="o">+---------------+-----+</span>
<span class="mi">6</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">EXPLAIN</span> <span class="n">SElect</span> <span class="n">Name</span><span class="p">,</span> <span class="n">Age</span> <span class="n">from</span> <span class="n">students</span> <span class="n">where</span> <span class="n">Age</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">Select</span> <span class="n">avg</span><span class="p">(</span><span class="n">Age</span><span class="p">)</span> <span class="n">from</span> <span class="n">students</span><span class="p">)</span><span class="err">\</span><span class="n">G</span><span class="p">;</span>
<span class="o">***************************</span> <span class="mf">1.</span> <span class="n">row</span> <span class="o">***************************</span>
           <span class="nl">id:</span> <span class="mi">1</span>
  <span class="nl">select_type:</span> <span class="n">PRIMARY</span>
        <span class="nl">table:</span> <span class="n">students</span>
   <span class="nl">partitions:</span> <span class="nb">NULL</span>
         <span class="nl">type:</span> <span class="n">ALL</span>
<span class="nl">possible_keys:</span> <span class="nb">NULL</span>
          <span class="nl">key:</span> <span class="nb">NULL</span>
      <span class="nl">key_len:</span> <span class="nb">NULL</span>
          <span class="nl">ref:</span> <span class="nb">NULL</span>
         <span class="nl">rows:</span> <span class="mi">27</span>
     <span class="nl">filtered:</span> <span class="mf">33.33</span>
        <span class="nl">Extra:</span> <span class="n">Using</span> <span class="n">where</span>
<span class="o">***************************</span> <span class="mf">2.</span> <span class="n">row</span> <span class="o">***************************</span>
           <span class="nl">id:</span> <span class="mi">2</span>
  <span class="nl">select_type:</span> <span class="n">SUBQUERY</span>
        <span class="nl">table:</span> <span class="n">students</span>
   <span class="nl">partitions:</span> <span class="nb">NULL</span>
         <span class="nl">type:</span> <span class="n">ALL</span>
<span class="nl">possible_keys:</span> <span class="nb">NULL</span>
          <span class="nl">key:</span> <span class="nb">NULL</span>
      <span class="nl">key_len:</span> <span class="nb">NULL</span>
          <span class="nl">ref:</span> <span class="nb">NULL</span>
         <span class="nl">rows:</span> <span class="mi">27</span>
     <span class="nl">filtered:</span> <span class="mf">100.00</span>
        <span class="nl">Extra:</span> <span class="nb">NULL</span>
<span class="mi">2</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span><span class="p">,</span> <span class="mi">1</span> <span class="n">warning</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="nl">ERROR:</span>
<span class="n">No</span> <span class="n">query</span> <span class="n">specified</span>
</pre></div>


<ul>
<li>基于IN中的子查询，子查询应该单键查询并返回一个或者多个值从构成列表</li>
</ul>
<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">Name</span><span class="p">,</span> <span class="n">Age</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">WHERE</span> <span class="n">Age</span> <span class="n">IN</span> <span class="p">(</span><span class="n">SELECT</span> <span class="n">Age</span> <span class="n">FROM</span> <span class="n">teachers</span><span class="p">);</span>
<span class="n">Empty</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.01</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h2 id="from">FROM</h2>
<div class="hlcode"><pre><span class="n">SELECT</span> <span class="n">tb_alias</span><span class="p">.</span><span class="n">col1</span><span class="p">,...</span> <span class="n">FROM</span> <span class="p">(</span><span class="n">SELECT</span> <span class="n">clause</span><span class="p">)</span> <span class="n">AS</span> <span class="n">tb_alias</span> <span class="n">WHERE</span> <span class="n">Clause</span><span class="p">;</span>
</pre></div>


<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">aage</span><span class="p">,</span><span class="n">ClassID</span> <span class="n">FROM</span> <span class="p">(</span> <span class="n">SELECT</span> <span class="n">avg</span><span class="p">(</span><span class="n">Age</span><span class="p">)</span> <span class="n">AS</span> <span class="n">aage</span><span class="p">,</span> <span class="n">ClassID</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">WHERE</span> <span class="n">ClassID</span> <span class="n">IS</span> <span class="n">NOT</span> <span class="nb">NULL</span> <span class="n">GROUP</span> <span class="n">BY</span> <span class="n">ClassID</span><span class="p">)</span> <span class="n">AS</span> <span class="n">s</span> <span class="n">WHERE</span> <span class="n">s</span><span class="p">.</span><span class="n">aage</span><span class="o">&gt;</span><span class="mi">30</span><span class="p">;</span>
<span class="o">+---------+---------+</span>
<span class="o">|</span> <span class="n">aage</span>    <span class="o">|</span> <span class="n">ClassID</span> <span class="o">|</span>
<span class="o">+---------+---------+</span>
<span class="o">|</span> <span class="mf">36.0000</span> <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>
<span class="o">|</span> <span class="mf">46.0000</span> <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>
<span class="o">+---------+---------+</span>
<span class="mi">2</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h2 id="exists">EXISTS</h2>
<p>EXISTS 子查询用来判断条件是否满足，满足的话为 True，不满足为 False。</p>
<div class="hlcode"><pre><span class="n">SELECT</span> <span class="n">player_id</span><span class="p">,</span> <span class="n">team_id</span><span class="p">,</span> <span class="n">player_name</span> <span class="n">FROM</span> <span class="n">player</span> <span class="n">WHERE</span> <span class="n">EXISTS</span> <span class="p">(</span><span class="n">SELECT</span> <span class="n">player_id</span> <span class="n">FROM</span> <span class="n">player_score</span> <span class="n">WHERE</span> <span class="n">player</span><span class="p">.</span><span class="n">player_id</span> <span class="o">=</span> <span class="n">player_score</span><span class="p">.</span><span class="n">player_id</span><span class="p">)</span>
</pre></div>


<h2 id="in">IN</h2>
<p>IN表是外边和内表进行hash连接，是先执行子查询。<br />
EXISTS是对外表进行循环，然后在内表进行查询。<br />
因此如果外表数据量大，则用IN，如果外表数据量小，也用EXISTS。<br />
IN有一个缺陷是不能判断NULL，因此如果字段存在NULL值，则会出现返回，因为最好使用NOT EXISTS</p>
<div class="hlcode"><pre><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">A</span> <span class="n">WHERE</span> <span class="n">cc</span> <span class="n">IN</span> <span class="p">(</span><span class="n">SELECT</span> <span class="n">cc</span> <span class="n">FROM</span> <span class="n">B</span><span class="p">)</span>
</pre></div>


<h2 id="union">UNION 联合查询</h2>
<div class="hlcode"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">Name</span><span class="p">,</span><span class="n">Age</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">UNION</span> <span class="n">SELECT</span> <span class="n">Name</span><span class="p">,</span><span class="n">Age</span> <span class="n">FROM</span> <span class="n">teachers</span><span class="p">;</span>
<span class="o">+---------------+-----+</span>
<span class="o">|</span> <span class="n">Name</span>          <span class="o">|</span> <span class="n">Age</span> <span class="o">|</span>
<span class="o">+---------------+-----+</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Zhongyu</span>   <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Potian</span>    <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xie</span> <span class="n">Yanke</span>     <span class="o">|</span>  <span class="mi">53</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Ding</span> <span class="n">Dian</span>     <span class="o">|</span>  <span class="mi">32</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yu</span> <span class="n">Yutong</span>     <span class="o">|</span>  <span class="mi">26</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Shi</span> <span class="n">Qing</span>      <span class="o">|</span>  <span class="mi">46</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xi</span> <span class="n">Ren</span>        <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Lin</span> <span class="n">Daiyu</span>     <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Ren</span> <span class="n">Yingying</span>  <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yue</span> <span class="n">Lingshan</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yuan</span> <span class="n">Chengzhi</span> <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Wen</span> <span class="n">Qingqing</span>  <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Tian</span> <span class="n">Boguang</span>  <span class="o">|</span>  <span class="mi">33</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Lu</span> <span class="n">Wushuang</span>   <span class="o">|</span>  <span class="mi">17</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Duan</span> <span class="n">Yu</span>       <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xu</span> <span class="n">Zhu</span>        <span class="o">|</span>  <span class="mi">21</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Lin</span> <span class="n">Chong</span>     <span class="o">|</span>  <span class="mi">25</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Hua</span> <span class="n">Rong</span>      <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xue</span> <span class="n">Baochai</span>   <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Diao</span> <span class="n">Chan</span>     <span class="o">|</span>  <span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Huang</span> <span class="n">Yueying</span> <span class="o">|</span>  <span class="mi">22</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xiao</span> <span class="n">Qiao</span>     <span class="o">|</span>  <span class="mi">20</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Ma</span> <span class="n">Chao</span>       <span class="o">|</span>  <span class="mi">23</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Xu</span> <span class="n">Xian</span>       <span class="o">|</span>  <span class="mi">27</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Sun</span> <span class="n">Dasheng</span>   <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Jingjiao</span> <span class="n">King</span> <span class="o">|</span> <span class="mi">100</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Yinjiao</span> <span class="n">King</span>  <span class="o">|</span>  <span class="mi">98</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Song</span> <span class="n">Jiang</span>    <span class="o">|</span>  <span class="mi">45</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Zhang</span> <span class="n">Sanfeng</span> <span class="o">|</span>  <span class="mi">94</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Miejue</span> <span class="n">Shitai</span> <span class="o">|</span>  <span class="mi">77</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Lin</span> <span class="n">Chaoying</span>  <span class="o">|</span>  <span class="mi">93</span> <span class="o">|</span>
<span class="o">+---------------+-----+</span>
<span class="mi">31</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">EXPLAIN</span> <span class="n">SELECT</span> <span class="n">Name</span><span class="p">,</span><span class="n">Age</span> <span class="n">FROM</span> <span class="n">students</span> <span class="n">UNION</span> <span class="n">SELECT</span> <span class="n">Name</span><span class="p">,</span><span class="n">Age</span> <span class="n">FROM</span> <span class="n">teachers</span><span class="err">\</span><span class="n">G</span><span class="p">;</span>
<span class="o">***************************</span> <span class="mf">1.</span> <span class="n">row</span> <span class="o">***************************</span>
           <span class="nl">id:</span> <span class="mi">1</span>
  <span class="nl">select_type:</span> <span class="n">PRIMARY</span>
        <span class="nl">table:</span> <span class="n">students</span>
   <span class="nl">partitions:</span> <span class="nb">NULL</span>
         <span class="nl">type:</span> <span class="n">ALL</span>
<span class="nl">possible_keys:</span> <span class="nb">NULL</span>
          <span class="nl">key:</span> <span class="nb">NULL</span>
      <span class="nl">key_len:</span> <span class="nb">NULL</span>
          <span class="nl">ref:</span> <span class="nb">NULL</span>
         <span class="nl">rows:</span> <span class="mi">27</span>
     <span class="nl">filtered:</span> <span class="mf">100.00</span>
        <span class="nl">Extra:</span> <span class="nb">NULL</span>
<span class="o">***************************</span> <span class="mf">2.</span> <span class="n">row</span> <span class="o">***************************</span>
           <span class="nl">id:</span> <span class="mi">2</span>
  <span class="nl">select_type:</span> <span class="n">UNION</span>
        <span class="nl">table:</span> <span class="n">teachers</span>
   <span class="nl">partitions:</span> <span class="nb">NULL</span>
         <span class="nl">type:</span> <span class="n">ALL</span>
<span class="nl">possible_keys:</span> <span class="nb">NULL</span>
          <span class="nl">key:</span> <span class="nb">NULL</span>
      <span class="nl">key_len:</span> <span class="nb">NULL</span>
          <span class="nl">ref:</span> <span class="nb">NULL</span>
         <span class="nl">rows:</span> <span class="mi">4</span>
     <span class="nl">filtered:</span> <span class="mf">100.00</span>
        <span class="nl">Extra:</span> <span class="nb">NULL</span>
<span class="o">***************************</span> <span class="mf">3.</span> <span class="n">row</span> <span class="o">***************************</span>
           <span class="nl">id:</span> <span class="nb">NULL</span>
  <span class="nl">select_type:</span> <span class="n">UNION</span> <span class="n">RESULT</span>
        <span class="nl">table:</span> <span class="o">&lt;</span><span class="n">union1</span><span class="p">,</span><span class="mi">2</span><span class="o">&gt;</span>
   <span class="nl">partitions:</span> <span class="nb">NULL</span>
         <span class="nl">type:</span> <span class="n">ALL</span>
<span class="nl">possible_keys:</span> <span class="nb">NULL</span>
          <span class="nl">key:</span> <span class="nb">NULL</span>
      <span class="nl">key_len:</span> <span class="nb">NULL</span>
          <span class="nl">ref:</span> <span class="nb">NULL</span>
         <span class="nl">rows:</span> <span class="nb">NULL</span>
     <span class="nl">filtered:</span> <span class="nb">NULL</span>
        <span class="nl">Extra:</span> <span class="n">Using</span> <span class="n">temporary</span>
<span class="mi">3</span> <span class="n">rows</span> <span class="n">in</span> <span class="n">set</span><span class="p">,</span> <span class="mi">1</span> <span class="n">warning</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<h1 id="example">example</h1>
<h2 id="_14">重复记录</h2>
<p>查找全部重复记录</p>
<div class="hlcode"><pre><span class="k">Select</span> <span class="o">*</span> <span class="k">From</span> <span class="err">表</span> <span class="k">Where</span> <span class="err">重复字段</span> <span class="k">In</span> <span class="p">(</span><span class="k">Select</span> <span class="err">重复字段</span> <span class="k">From</span> <span class="err">表</span> <span class="k">Group</span> <span class="k">By</span> <span class="err">重复字段</span> <span class="k">Having</span> <span class="k">Count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span>
</pre></div>


<p>过滤重复记录(只显示一条)</p>
<div class="hlcode"><pre><span class="k">Select</span> <span class="o">*</span> <span class="k">From</span> <span class="n">HZT</span> <span class="k">Where</span> <span class="n">ID</span> <span class="k">In</span> <span class="p">(</span><span class="k">Select</span> <span class="k">Max</span><span class="p">(</span><span class="n">ID</span><span class="p">)</span> <span class="k">From</span> <span class="n">HZT</span> <span class="k">Group</span> <span class="k">By</span> <span class="n">Title</span><span class="p">)</span>
</pre></div>


<p>删除全部重复记录（慎用）</p>
<div class="hlcode"><pre><span class="k">Delete</span> <span class="err">表</span> <span class="k">Where</span> <span class="err">重复字段</span> <span class="k">In</span> <span class="p">(</span><span class="k">Select</span> <span class="err">重复字段</span> <span class="k">From</span> <span class="err">表</span> <span class="k">Group</span> <span class="k">By</span> <span class="err">重复字段</span> <span class="k">Having</span> <span class="k">Count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span>
</pre></div>


<p>保留一条（这个应该是大多数人所需要的）</p>
<div class="hlcode"><pre><span class="k">Delete</span> <span class="n">HZT</span> <span class="k">Where</span> <span class="n">ID</span> <span class="k">Not</span> <span class="k">In</span> <span class="p">(</span><span class="k">Select</span> <span class="k">Max</span><span class="p">(</span><span class="n">ID</span><span class="p">)</span> <span class="k">From</span> <span class="n">HZT</span> <span class="k">Group</span> <span class="k">By</span> <span class="n">Title</span><span class="p">)</span>
</pre></div>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2020 Xu XueHua.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2020-12-12 14:54:32</p>
      </span>
    </div>

    
    
  </body>
</html>